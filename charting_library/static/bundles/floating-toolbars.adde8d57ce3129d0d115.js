webpackJsonp([3],{1005:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i,n,s,r,a,l,c,p,d,u,h,v,f,g,_,m;o.d(e,"FavoriteDrawingToolbar",function(){return m}),i=o(0),n=o(14),o.n(n),s=o(93),o.n(s),r=o(56),o.n(r),o(9),a=o(1078),l=o(1048),c=o(47),o.n(c),p=o(100),o.n(p),d=o(41),o.n(d),u=o(333),h=o(44),o.n(h),v=o(17),f=o.n(v),g=o(1117),o.n(g),_='<span class="tv-favorited-drawings-toolbar__widget {{#isActive}}i-active{{/isActive}} apply-common-tooltip" title="{{title}}">{{{icon}}}</span>',m=function(e){function o(t){var o=e.call(this,{allowSortable:!Modernizr.touch,dragOnlyInsideToolbar:!0,defaultPosition:t,positionSettingsKey:"chart.favoriteDrawingsPosition"})||this;return o._linetoolsWidgets={},o._canBeShownValue=new f.a(!1),o._attachHandlers(),o._loadVisibilityState(),o}return i.c(o,e),o.prototype.show=function(){this._canBeShownValue.value()&&(h.setValue(o._visibilitySettingsKey,!0),this.isVisible()||this._renderAllLinetools(),e.prototype.show.call(this))},o.prototype.hide=function(){h.setValue(o._visibilitySettingsKey,!1),e.prototype.hide.call(this)},o.prototype.canBeShown=function(){return this._canBeShownValue.readonly()},o.prototype._onFavoriteAdded=function(t){this._canBeShownValue.setValue(!0),this.addWidget(this._createLinetoolWidget(t)),this.show()},o.prototype._onFavoriteRemoved=function(t){this.removeWidget(this._linetoolsWidgets[t]),delete this._linetoolsWidgets[t],0===l.a.favoritesCount()&&(this._canBeShownValue.setValue(!1),this.hide())},o.prototype._onFavoriteMoved=function(){this._renderAllLinetools()},o.prototype._onSelectedLinetoolChanged=function(t){var e=this;Object.keys(this._linetoolsWidgets).forEach(function(o){e._linetoolsWidgets[o].classList.toggle("i-active",t===o)})},o.prototype._createLinetoolWidget=function(e){var o=$(t.render(_,{icon:u.lineToolsInfo[e].icon,isActive:e===d.tool.value(),title:u.lineToolsInfo[e].localizedName}))[0];return o.addEventListener("click",function(t){t.preventDefault(),d.tool.value()===e?Object(d.resetToCursor)():d.tool.setValue(e)}),this._linetoolsWidgets[e]=o,o},o.prototype._renderAllLinetools=function(){var t=this;this._linetoolsWidgets={},this.removeWidgets(),l.a.favorites().forEach(function(e){t.addWidget(t._createLinetoolWidget(e))})},o.prototype._attachHandlers=function(){var t=this;l.a.favoriteAdded.subscribe(this,this._onFavoriteAdded),l.a.favoriteRemoved.subscribe(this,this._onFavoriteRemoved),l.a.favoriteMoved.subscribe(this,this._onFavoriteMoved),l.a.favoritesSynced.subscribe(null,function(){t._loadVisibilityState(),t._renderAllLinetools()}),this.onWidgetsReordered().subscribe(this,function(e,o){if(l.a.favoriteMoved.unsubscribe(t,t._onFavoriteMoved),!l.a.moveFavorite(l.a.favorite(e),o))throw Error("Something went wrong");l.a.favoriteMoved.subscribe(t,t._onFavoriteMoved)}),this.onContextMenu(function(e){e.preventDefault();var o=new c.Action({text:$.t("Hide Favorite Drawings Toolbar")});o.callbacks().subscribe(null,function(){t.hide()}),p.createMenu([o]).show(e)}),
d.tool.subscribe(this._onSelectedLinetoolChanged.bind(this))},o.prototype._loadVisibilityState=function(){var t,e=l.a.favoritesCount()>0;this._canBeShownValue.setValue(e),t=h.getBool(o._visibilitySettingsKey,!0),t&&e?this.show():this.hide()},o._visibilitySettingsKey="ChartFavoriteDrawingToolbarWidget.visible",o}(a.a)}.call(e,o(93))},1011:function(t,e,o){"use strict";(function(e,i){function n(t){this._chartWidgetCollection=t,this._bindings=[],this._hasAlertWathcedValue=null,this._$templatesButton=null,this._currentProperties=null,this._toolbarWidgets=[],this._clearProeprtiesOnHideTimeoutId=null,this._init(),this.attachHandlers()}function s(t,e){t.push({id:e,widget:$('<div class="tv-linetool-properties-toolbar__text">'+e+"</div>")[0]})}function r(t,e){t.push({id:e.value,widget:$(e.iconSvgCode)[0]})}function a(t,e){return $("<div>").addClass("tv-linetool-properties-toolbar__icon").addClass(e).append(t)[0]}function l(t){return a(t,"tv-linetool-properties-toolbar__icon--line-props")}var c,p,d,u,h,v,f,g,_,m,y,b,C,w,T,x=o(1012),S=x.PropertyPage,P=x.ColorBinding,k=o(99).BarsMarksContainer,W=o(1).LineDataSource,L=o(41),E=o(1035),M=o(1027).bindPopupMenu,V=o(3).DefaultProperty,B=o(1174).GroupButtonFloatingToolbar,I=o(143).showEditObjectDialog,A=o(113).LineEnd,O=o(119).isMultipleLayout,F=o(222);o(1033),o(1176),n.prototype.activeChartWidget=function(){return this._chartWidgetCollection.activeChartWidget.value()},n.prototype.selectedSource=function(){return this._chartWidgetCollection.selectedSource.value()},n.prototype._init=function(){this._floatingToolbar=new B({addClass:"tv-linetool-properties-toolbar",defaultPosition:{top:F.HEADER_TOOLBAR_HEIGHT_EXPANDED+15,left:window.innerWidth/2},positionSettingsKey:"properties_toolbar.position"}),this._floatingToolbar.onWidgetStateChanged().subscribe(this,this._onPropertyChangedInToolbar),this._sourceActions=this._createSourceActions(),this._sourceActions.forEach(function(t){this._floatingToolbar.addWidget(t.button)},this)},n.prototype._bindPopupMenuDirection=function(){return this._floatingToolbar.isVertical()?"right":"down"},n.prototype._onPropertyChangedInToolbar=function(t,e){this._currentProperties&&this.activeChartWidget().model().setProperty(this._currentProperties[t],e)},n.prototype._onPropertyChanged=function(t,e){this._floatingToolbar.setGroupedWidgetState(t,e.value())},n.prototype._hideAllSourceActions=function(){this._sourceActions.forEach(function(t){this._floatingToolbar.hideWidget(t.button)},this),this._sourceActionsVisible=!1},n.prototype._updateSourceActionsVisibility=function(t){this._sourceActionsVisible=!1,this._sourceActions.forEach(function(e){!e.isVisibleForSource||e.isVisibleForSource(t)?(this._floatingToolbar.showWidget(e.button),this._sourceActionsVisible=!0):this._floatingToolbar.hideWidget(e.button)},this)},n.prototype.attachHandlers=function(){L.tool.subscribe(this.onToolChanged.bind(this),{callWithLast:!0}),this._chartWidgetCollection.selectedSource.subscribe(this.onSourceChanged.bind(this)),
this._chartWidgetCollection.layout.subscribe(this._updateCloneButtonTitle.bind(this))},n.prototype._updateCloneButtonTitle=function(){this._setButtonTitle(this._cloneButton,this._cloneButtonTitle())},n.prototype.onToolChanged=function(t,e){if(t&&-1!==t.toLowerCase().indexOf("linetool")){var e=e instanceof V?e:new V(t.toLowerCase());this._hideAllSourceActions(),this.showPropertiesOf(t,e),this.showTemplatesOf({tool:t,properties:e}),this._updateVisibility()}else this.selectedSource()?this.onSourceChanged(this.selectedSource()):this.hide()},n.prototype.findSourceOnWidget=function(t){var e,o,i,n;for(e=0;e<this.activeChartWidget().model().panes().length;e++)for(o=this.activeChartWidget().model().panes()[e],i=o.orderedSources(),n=0;n<i.length;n++)if(i[n]===t)return i[n]},n.prototype.onSourceChanged=function(t){if(this._hasAlertWathcedValue&&(this._hasAlertWathcedValue.destroy(),this._hasAlertWathcedValue=null),!t)return void this.hide();t instanceof W&&!(t instanceof k)&&this.findSourceOnWidget(t)?(!t.userEditEnabled()||"LineToolBrush"!==t.toolname&&this.activeChartWidget().model().lineBeingCreated()?this._hideAllSourceActions():(this._updateSourceActionsVisibility(t),t.canHasAlert()&&(this._hasAlertWathcedValue=t.hasAlert.spawn(),this._hasAlertWathcedValue.subscribe(this._updateSourceActionsVisibility.bind(this,t)))),this.showPropertiesOf(t.getConstructor(),t.properties()),this.showTemplatesOf({source:t}),this._setupToggleLockButton(t),this._updateVisibility()):this.hide()},n.prototype.showTemplatesOf=function(t){var i,n,s,r,a;e.enabled("line_tool_templates")&&(i=t.source,i?(n=i.getConstructor(),s=i.properties()):(n=t.tool,s=t.properties),this._$templatesButton&&(this._floatingToolbar.removeWidget(this._$templatesButton[0]),this._$templatesButton=null),r=this,a=function(t){if(i){r.activeChartWidget().model().applyLineToolTemplate(i,t,"Apply Drawing Template"),r.onSourceChanged(i)}else s.merge(t),s.listeners().fire(this),s.saveDefaults(),r.onToolChanged(n,s)},TradingView.onWidget()&&!window.is_authenticated||!e.enabled("linetoolpropertieswidget_template_button")||(this._templatesList=new E(n,a,{buttonInner:'<div class="tv-linetool-properties-toolbar__icon">'+o(1177)+'</div><span class="tv-caret tv-caret--small tv-caret--colored tv-linetool-properties-toolbar__caret"></span>',buttonClass:"tv-linetool-properties-toolbar__button apply-common-tooltip",defaultsCallback:function(){if(void 0!==i){r.activeChartWidget().model().restoreLineToolFactoryDefaults(i,"Load default drawing template")}else s.restoreFactoryDefaults();r.showPropertiesOf(n,s)},saveAsText:$.t("Save Drawing Template As..."),applyDefaultText:$.t("Apply Default Drawing Template"),getDataForSaveAs:i?function(){return i.template()}:null,popupActiveClass:"i-dropped",popupDirection:this._bindPopupMenuDirection.bind(this)}),this._$templatesButton=this._templatesList.createButton().attr("title",$.t("Templates")),this._floatingToolbar.addWidget(this._$templatesButton[0],{index:0})),this._templatesVisible=!0)},n.prototype.templatesList=function(){return this._templatesList
},n.prototype._createButton=function(t){var e,o,i;return t=t||{},e=document.createElement("div"),this._setButtonTitle(e,t.title),e.className+="tv-linetool-properties-toolbar__button apply-common-tooltip",e.addEventListener("click",t.callback),t.svgIcon&&(o=document.createElement("div"),o.classList.add("tv-linetool-properties-toolbar__icon"),o.appendChild(t.svgIcon),e.appendChild(o)),t.addCaret&&(i=document.createElement("div"),i.className="tv-caret tv-caret--small tv-caret--colored tv-linetool-properties-toolbar__caret",e.appendChild(i)),e},n.prototype._setButtonTitle=function(t,e){t.setAttribute("title",e)},n.prototype._createSettingsButton=function(){var t=this;return this._createButton({title:$.t("Settings"),callback:function(){I(t.selectedSource(),t.activeChartWidget().model(),{onWidget:t.activeChartWidget()._options.onWidget})},svgIcon:$(o(1178))[0]})},n.prototype._createZOrderButton=function(){var t=this._createButton({title:$.t("Visual Order"),callback:function(){t.classList.contains("i-dropped")||$(t).trigger("button-popup",[this._getZOrderActions()])}.bind(this),svgIcon:$(o(1179))[0],addCaret:!0});return M($(t),null,{direction:this._bindPopupMenuDirection.bind(this),event:"button-popup",reverse:!1,notCloseOnButtons:!0,activeClass:"i-dropped"}),t},n.prototype._cloneButtonTitle=function(){var t=$.t("Clone");return e.enabled("datasource_copypaste")&&(t+=", "+$.t("Copy")),O(this._chartWidgetCollection.layout.value())&&(t+=", "+$.t("Sync")),t},n.prototype._createCloneButton=function(){var t=this._createButton({title:this._cloneButtonTitle(),callback:function(){t.classList.contains("i-dropped")||$(t).trigger("button-popup",[this._getCloneActions()])}.bind(this),svgIcon:$(o(1180))[0],addCaret:!0});return M($(t),null,{direction:this._bindPopupMenuDirection.bind(this),event:"button-popup",reverse:!1,notCloseOnButtons:!0,activeClass:"i-dropped"}),t},n.prototype._createLockButton=function(){var t=this._createButton({title:$.t("Lock"),callback:function(){this.activeChartWidget().toggleLockSelectedObject()}.bind(this),svgIcon:$(o(1062))[0]});return this._lockChangeListener=function(e){t.classList.toggle("i-active",!!e.value())},t},n.prototype._createHideButton=function(){return this._createButton({title:$.t("Hide"),callback:function(){this.activeChartWidget().hideSelectedObject()}.bind(this),svgIcon:$(o(1181))[0]})},n.prototype._createRemoveButton=function(){return this._createButton({title:$.t("Remove"),callback:function(){this.activeChartWidget().removeSelectedSource()}.bind(this),svgIcon:$(o(1182))[0]})},n.prototype._createSourceActions=function(){var t=[];return e.enabled("property_pages")&&t.push({button:this._createSettingsButton()}),this._cloneButton=this._createCloneButton(),t.push({button:this._createZOrderButton()},{button:this._cloneButton,isVisibleForSource:function(t){var e=TradingView.className(t.constructor);return!this.activeChartWidget().model().model().isSingleInstanceLineTool(e)}.bind(this)},{button:this._createLockButton()},{button:this._createHideButton()},{button:this._createRemoveButton()}),t},
n.prototype._getCloneActions=function(){var t=this.activeChartWidget().model(),o=this.selectedSource(),i=[];return o.properties().clonable.value()&&i.push({title:$.t("Clone"),action:function(){t.cloneLineTool(o)}}),e.enabled("datasource_copypaste")?(i.push({title:$.t("Copy"),shortcut:"Ctrl-C",action:function(){t.copySourceToClip(o)}}),O(this._chartWidgetCollection.layout.value())?(o.linkKey?i.push({title:$.t("Stop syncing"),action:function(){t.unlinkLine(o)}}):i.push({title:$.t("Sync to all charts"),action:function(){t.copyToOtherCharts(o)}}),i):i):i},n.prototype._getZOrderActions=function(){var t=[],e=this.selectedSource(),o=this.activeChartWidget().model(),i={title:$.t("Bring to Front"),action:function(){o.bringToFront(e)}},n={title:$.t("Send to Back"),action:function(){o.sendToBack(e)}},s={title:$.t("Bring Forward"),action:function(){o.changeZOrder(e,1)}},r={title:$.t("Send Backward"),action:function(){o.changeZOrder(e,-1)}},a=o.paneForSource(this.selectedSource()),l=a.getZOrderMinMax();return e.zorder()===l.minZOrder&&(n.disabled=!0,r.disabled=!0),e.zorder()===l.maxZOrder&&(s.disabled=!0,i.disabled=!0),t.push(i,n,s,r),t},n.prototype._getPossibleProperty=function(t){var e,o,i=[],s=this._defaultToolProperties();for(e=0;e<s.length;e++)o=s[e],o.name in t&&i.push(o);return t.extendLeft||(i=i.map(function(t){return"leftEnd"===t.name&&(t.comboboxOptions=t.comboboxOptions.filter(function(t){return t.value!==n.LINE_EXTEND})),t})),t.extendRight||(i=i.map(function(t){return"rightEnd"===t.name&&(t.comboboxOptions=t.comboboxOptions.filter(function(t){return t.value!==n.LINE_EXTEND})),t})),i},n.prototype.showPropertiesOf=function(t,e){var o,i,n,a,l,c,p,d;if(this._toolExceptionCases||(this._toolExceptionCases=this._createToolExceptionCases()),o=this._toolExceptionCases[t]||this._getPossibleProperty(e),this._clearProperties(),this._propertiesVisible=!1,o.length){for(i={},n=o.length-1;n>=0;--n)if(a=o[n],l=e[a.name],"function"!=typeof(c=a.showIf)||c(l,e)){if(!l)continue;if(this._propertiesVisible=!0,p=[],"combobox"!==a.inputType){d=this.colorPropertyControl(l,a,e),this._floatingToolbar.addWidget(d[0],{index:this._$templatesButton?1:0}),this._toolbarWidgets.push(d[0]);continue}a.simple?a.comboboxOptions.forEach(s.bind(null,p)):a.comboboxOptions.forEach(r.bind(null,p)),a.propertyProxy&&(l=a.propertyProxy(e,this.activeChartWidget().model())),i[a.name]=l,l.subscribe(this,this._onPropertyChanged.bind(this,a.name,l)),this._floatingToolbar.addGroupedWidget({id:a.name,currentStateId:l.value(),stateWidgetAddClass:"tv-linetool-properties-toolbar__sub-widget",states:p,widgetAddClass:"tv-linetool-properties-toolbar__grouped-button",tooltip:a.title},{index:this._$templatesButton?1:0})}this._currentProperties=i}},n.prototype._updateVisibility=function(){this._propertiesVisible||this._sourceActionsVisible||this._templatesVisible?this._show():this.hide()},n.prototype._clearProperties=function(){this._currentProperties&&(this._clearProeprtiesOnHideTimeoutId&&(clearTimeout(this._clearProeprtiesOnHideTimeoutId),
this._clearProeprtiesOnHideTimeoutId=null),Object.keys(this._currentProperties).forEach(function(t){this._currentProperties[t].unsubscribeAll(this),this._floatingToolbar.removeGroupedWidget(t)},this),this._currentProperties=null,this._toolbarWidgets.forEach(function(t){this._floatingToolbar.removeWidget(t)},this),this._toolbarWidgets=[],this.clearBindings())},n.prototype.hide=function(){this._floatingToolbar.hide(),this._clearProeprtiesOnHideTimeoutId=setTimeout(this._clearProperties.bind(this),this._floatingToolbar.hideDuration())},n.prototype._show=function(){this._floatingToolbar.show()},n.prototype.refresh=function(){this.onSourceChanged(this.selectedSource())},n.prototype._setupToggleLockButton=function(t){t!==this._selectedSourceBk&&(this._selectedSourceBk&&this._selectedSourceBk.properties().frozen&&this._selectedSourceBk.properties().frozen.unsubscribe(this,this._lockChangeListener),t&&t.properties().frozen&&(t.properties().frozen.subscribe(this,this._lockChangeListener),this._lockChangeListener(t.properties().frozen)),this._selectedSourceBk=t)},n.prototype.bindControl=function(t){this._bindings.push(t)},n.prototype.clearBindings=function(t){for(var e=this._bindings.length;e--;)this._bindings[e].destroy();this._bindings.length=0},n.prototype.colorPropertyControl=function(t,e,o){var i,s,r=S.prototype.createColorPicker({addClass:"tv-linetool-properties-toolbar__color-picker apply-common-tooltip",direction:this._bindPopupMenuDirection.bind(this)});return r.attr("title",e.title),i=r.find("input"),s=$(e.iconSvgCode),s.on("click",function(t){i.data("tvcolorpicker")||i.focus()}),$(document).on("click",function(t){i.data("tvcolorpicker")?i.addClass("i-active"):i.removeClass("i-active")}),i.after(s),this.bindControl(new P(r,t,!0,this.activeChartWidget().model(),null,n.getTransparency(e,o))),"string"==typeof e.addClass&&r.addClass(e.addClass),r},n.getTransparency=function(t,e){if(t.transparency)return t.transparencyField?e[t.transparencyField].value():e.transparency.value()},n.prototype.createLineEndPropertyProxy=function(t,e){return function(o,s){var r,a;return r=o[e]&&o[e].value()?n.LINE_EXTEND:o[t].value(),a=new i(r),a.subscribe(this,function(i){var n=i.value();n<2?(s.beginUndoMacro(""),o[t].setValue(n),o[e]&&o[e].setValue(!1),s.endUndoMacro()):(s.beginUndoMacro(""),o[t].setValue(A.Normal),o[e]&&o[e].setValue(!0),s.endUndoMacro())}),a}},n.LINE_EXTEND=42,c=l(o(1183)),p=l(o(1184)),d=l(o(1185)),u=l(o(1186)),h=l(o(1187)),v=l(o(1188)),f=l(o(1189)),g=l(o(1190)),_=l(o(1191)),m=l(o(1192)),y=l(o(1193)),b=l(o(1194)),C=o(1195),w=o(1196),T=o(1197),n.prototype._defaultToolProperties=function(){return[{name:"color",inputType:"colorPicker",iconSvgCode:C,title:$.t("Color")},{name:"linecolor",inputType:"colorPicker",iconSvgCode:C,title:$.t("Color")},{name:"backgroundColor",inputType:"colorPicker",iconSvgCode:w,title:$.t("Background Color"),transparency:!0},{name:"linewidth",inputType:"combobox",comboboxOptions:[{value:1,iconSvgCode:c},{value:2,iconSvgCode:p},{value:3,iconSvgCode:d},{value:4,iconSvgCode:u}],title:$.t("Width")},{
name:"linestyle",title:$.t("Style"),inputType:"combobox",comboboxOptions:[{value:0,iconSvgCode:c},{value:1,iconSvgCode:h},{value:2,iconSvgCode:v}]},{name:"leftEnd",title:$.t("Left End"),inputType:"combobox",comboboxOptions:[{value:A.Normal,iconSvgCode:f},{value:A.Arrow,iconSvgCode:g},{value:n.LINE_EXTEND,iconSvgCode:_}],propertyProxy:this.createLineEndPropertyProxy("leftEnd","extendLeft")},{name:"rightEnd",title:$.t("Right End"),inputType:"combobox",comboboxOptions:[{value:A.Normal,iconSvgCode:m},{value:A.Arrow,iconSvgCode:y},{value:n.LINE_EXTEND,iconSvgCode:b}],propertyProxy:this.createLineEndPropertyProxy("rightEnd","extendRight")}]},n.prototype._riskPropertiesExceptionCases=function(){return[{name:"textcolor",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:T},{name:"profitBackground",title:$.t("Profit Background Color"),inputType:"colorPicker",iconSvgCode:w,transparency:!0,transparencyField:"profitBackgroundTransparency"},{name:"stopBackground",title:$.t("Stop Background Color"),inputType:"colorPicker",iconSvgCode:w,transparency:!0,transparencyField:"stopBackgroundTransparency"},{name:"linecolor",title:$.t("Border color"),inputType:"colorPicker",iconSvgCode:C}]},n.prototype._elliottPropertiesExceptionCases=function(){return[{name:"color",title:$.t("Color"),inputType:"colorPicker",iconSvgCode:C}]},n.prototype._rangeExceptionCases=function(){return[{name:"linecolor",inputType:"colorPicker",iconSvgCode:C,title:$.t("Color")},{name:"backgroundColor",inputType:"colorPicker",iconSvgCode:w,title:$.t("Background Color"),transparency:!0,transparencyField:"backgroundTransparency"},{name:"linewidth",inputType:"combobox",comboboxOptions:[{value:1,iconSvgCode:c},{value:2,iconSvgCode:p},{value:3,iconSvgCode:d},{value:4,iconSvgCode:u}],title:"Width"}]},n.prototype._textPropertiesExceptionCases=function(){return[{name:"color",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:T},{name:"backgroundColor",title:$.t("Background Color"),inputType:"colorPicker",iconSvgCode:w,showIf:function(t,e){return!e||!e.fillBackground||!!e.fillBackground.value()}},{name:"borderColor",title:$.t("Border Color"),inputType:"colorPicker",iconSvgCode:C},{name:"bordercolor",title:$.t("Border Color"),inputType:"colorPicker",iconSvgCode:C},{name:"fontsize",title:$.t("Font Size"),inputType:"combobox",simple:!0,addClass:"simple fontsize-dropdown",comboboxOptions:[10,11,12,14,16,20,24,28,32,40]}]},n.prototype._notePropertiesExceptionCases=function(){return[{name:"markerColor",title:$.t("Marker Color"),inputType:"colorPicker",iconSvgCode:C},{name:"textColor",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:T},{name:"fontSize",title:$.t("Font Size"),inputType:"combobox",simple:!0,addClass:"simple fontsize-dropdown",comboboxOptions:[10,11,12,14,16,20,24,28,32,40]}]},n.prototype._brushPropertiesExceptionCases=function(){return[{name:"linecolor",inputType:"colorPicker",iconSvgCode:C,title:$.t("Color")},{name:"backgroundColor",inputType:"colorPicker",iconSvgCode:w,transparency:!0,showIf:function(t,e){return e.fillBackground.value()},
title:$.t("Background Color")},{name:"linewidth",inputType:"combobox",comboboxOptions:[{value:1,iconSvgCode:c},{value:2,iconSvgCode:p},{value:3,iconSvgCode:d},{value:4,iconSvgCode:u}],title:$.t("Line Width")},{name:"leftEnd",title:$.t("Left End"),inputType:"combobox",comboboxOptions:[{value:A.Normal,iconSvgCode:f},{value:A.Arrow,iconSvgCode:g}],propertyProxy:this.createLineEndPropertyProxy("leftEnd","extendLeft")},{name:"rightEnd",title:$.t("Right End"),inputType:"combobox",comboboxOptions:[{value:A.Normal,iconSvgCode:m},{value:A.Arrow,iconSvgCode:y}],propertyProxy:this.createLineEndPropertyProxy("rightEnd","extendRight")}]},n.prototype._oneColorForAllLines=function(){return[{name:"collectibleColors",inputType:"colorPicker",iconSvgCode:C,title:$.t("One color for all lines")}]},n.prototype._createToolExceptionCases=function(){return{LineToolRegressionTrend:[],LineToolGannSquare:n.prototype._oneColorForAllLines(),LineToolFibTimeZone:n.prototype._oneColorForAllLines(),LineToolBrush:n.prototype._brushPropertiesExceptionCases(),LineToolPolyline:n.prototype._brushPropertiesExceptionCases(),LineToolText:n.prototype._textPropertiesExceptionCases(),LineToolTextAbsolute:n.prototype._textPropertiesExceptionCases(),LineToolBalloon:n.prototype._textPropertiesExceptionCases(),LineToolCallout:n.prototype._textPropertiesExceptionCases(),LineToolPriceLabel:n.prototype._textPropertiesExceptionCases(),LineToolArrowMarkLeft:[],LineToolArrowMarkRight:[],LineToolArrowMarkUp:[],LineToolArrowMarkDown:[],LineToolFlagMark:[],LineToolThumbUp:[],LineToolThumbDown:[],LineToolElliottCircle:n.prototype._elliottPropertiesExceptionCases(),LineToolElliottSubminuette:n.prototype._elliottPropertiesExceptionCases(),LineToolElliottMinor:n.prototype._elliottPropertiesExceptionCases(),LineToolElliottMinorRetr:n.prototype._elliottPropertiesExceptionCases(),LineToolElliottMajorRetr:n.prototype._elliottPropertiesExceptionCases(),LineToolDateRange:n.prototype._rangeExceptionCases(),LineToolPriceRange:n.prototype._rangeExceptionCases(),LineToolDateAndPriceRange:n.prototype._rangeExceptionCases(),LineToolIcon:[{name:"color",title:$.t("Color"),inputType:"colorPicker",iconSvgCode:w}],LineToolNote:n.prototype._notePropertiesExceptionCases(),LineToolNoteAbsolute:n.prototype._notePropertiesExceptionCases(),LineToolThreeDrivers:[{name:"color",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:C}],LineToolRiskRewardLong:n.prototype._riskPropertiesExceptionCases(),LineToolRiskRewardShort:n.prototype._riskPropertiesExceptionCases(),LineToolBarsPattern:[{name:"color",title:$.t("Color"),inputType:"colorPicker",iconSvgCode:w}],LineToolProjection:[{name:"color1",title:$.t("Background color 1"),inputType:"colorPicker",iconSvgCode:w,transparency:!0},{name:"color2",title:$.t("Background color 2"),inputType:"colorPicker",iconSvgCode:w,transparency:!0},{name:"linewidth",inputType:"combobox",comboboxOptions:[{value:1,iconSvgCode:c},{value:2,iconSvgCode:p},{value:3,iconSvgCode:d},{value:4,iconSvgCode:u}]}],LineToolFibCircles:n.prototype._oneColorForAllLines(),
LineToolFibChannel:n.prototype._oneColorForAllLines(),LineToolFibSpeedResistanceArcs:n.prototype._oneColorForAllLines(),LineToolFibRetracement:n.prototype._oneColorForAllLines(),LineToolFibSpeedResistanceFan:n.prototype._oneColorForAllLines(),LineToolTrendBasedFibTime:n.prototype._oneColorForAllLines(),LineToolFibWedge:n.prototype._oneColorForAllLines(),LineToolGannComplex:n.prototype._oneColorForAllLines(),LineToolGannFixed:n.prototype._oneColorForAllLines(),LineToolGannFan:n.prototype._oneColorForAllLines(),LineToolPitchfan:n.prototype._oneColorForAllLines(),LineToolPitchfork:n.prototype._oneColorForAllLines(),LineToolSchiffPitchfork2:n.prototype._oneColorForAllLines(),LineToolSchiffPitchfork:n.prototype._oneColorForAllLines(),LineToolInsidePitchfork:n.prototype._oneColorForAllLines(),LineToolTrendBasedFibExtension:n.prototype._oneColorForAllLines()}},t.exports=n}).call(e,o(5),o(15))},1012:function(t,e,o){"use strict";(function(t){function i(t,e){return'<label for="'+e+'">'+t+"</label>"}function n(t,e){this._model=e,this._bindings=[],this._property=t,this.supportThemeSwitcher=!1}function s(t){return t.toUpperCase()}function r(t){return function(e){return e<t?t:e}}function a(t){return function(e){return e>t?t:e}}function l(t){return function(e){var o=parseInt(e,10);return B(o)?t:o}}function c(t){var e=new D;return function(o){var i=e.parse(o);return B(i)?t:i}}function p(t){var e=new D;return function(o){var i=e.parse(o);return B(i)?t():i}}function d(t,e){var o=new H(e);return function(e){var i=o.format(e);return B(i)?t:i}}function u(){return function(t){for(var e=t,o=t.replace(/[^\u0000-\u007F]/,"");o.length!==e.length;)e=o,o=e.replace(/[^\u0000-\u007F]/,"");return o}}function h(t){return function(e){return 0===e.length?t:e}}function v(t,e){return function(o){var i=t();return o===e.value()&&i&&(i.ticker||i.full_name)?i.ticker||i.full_name:o}}function f(t,e,o,i,n,s,r){j.call(this,t,e,i,n,s),this._transformFunction=o,this._setter=r,this._attachToControl(t,i)}function g(t,e,o,i,n){f.call(this,t,e,c(e.value()),o,i,n),this.addFormatter(function(t){return(new D).format(t)})}function _(t,e,o,i,n,s){this._subControlIds=e,j.call(this,t,o,i,n,s),this._forEachSubControl(function(t){this._attachToControl(t,i)})}function m(t,e,o,i,n,s,r){this._model=i,this._mainSeries=s,this._toIntTransformer=l(r),this._disabled=!1,j.call(this,t,e,o,i,n);var a=this;o&&t.change(function(){a.setValueToProperty(a.value())}),this._mainSeries.onBarReceived().subscribe(this,function(){a.setValue(this.property().value())})}function y(t,e,o,i,n,s,r){j.call(this,t,e,o,i,n),this._transform=s,o&&t.on("accept-symbol",function(t,e){this.setValueToProperty(e),this.setValue(e)}.bind(this)),r&&(r.subscribe(this,this._updateDisplayedSymbol),this._updateDelegate=r)}function b(t,e,o,i,n,s,r,a){j.call(this,t,e,i,n,s),this._transformFunction=o,this._propertyChangedHook=a,this._setter=r;var l=this;i&&t.change(function(){l._setter?l._setter.call(l,l.value()):l.setValueToProperty(l.value())})}function C(t,e){j.call(this,t,e)}function w(t,e,o,i,n,s){
if(!t.is(":checkbox, :radio"))return new x(t,e,o,i,n);j.call(this,t,e,o,i,n),this._setter=s;var r=this;o&&t.change(function(){r._setter?r._setter.call(r,r.value()):r.setValueToProperty(r.value())})}function T(t,e,o,i,n,s){j.call(this,t,e,o,i,n),this._inverted=!0===s}function x(t,e,o,i,n){j.call(this,t,e,o,i,n);var s=this;o&&t.click(function(){var t=$(this).toggleClass("active").hasClass("active");s.setValueToProperty(t)})}function S(t,e,o,i,n,s){var r,a;r=t.is("input")?t:t.find("input"),j.call(this,r,e,o,i,n),this._transparencyProperty=s,this.applyOldTransparency(),a=this,o&&r.change(function(){a.setValueToProperty(a.value())})}function P(e,o,i,n,s,r){function a(t,e){var o=c.control().slider("option","min"),i=c.control().slider("option","max"),n=c._property.value();(o<=n&&n<=i||o<e.value&&e.value<i)&&c.setValueToProperty(e.value)}function l(t,e){c.setValueToProperty(e.value)}isNumber(o.value())||(G.logWarn("Property cannot be binded to control, bad value (expect number): "+o.value()),o=new t),j.call(this,e,o,i,n,s);var c=this;i&&(r?(e.bind("slidechange",a),e.bind("slide",a)):(e.bind("slidechange",l),e.bind("slide",l))),e.bind("slidestart",function(t,e){n.beginUndoMacro(s)}),e.bind("slidestop",function(t,e){n.endUndoMacro()})}function k(t,e,o,i,n,s){w.call(this,t,e,i,n,s),this._intervalProperty=o,this._intervalProperty.listeners().subscribe(this,this.onIntervalChanged),this.onIntervalChanged()}function W(t,e,o,i,n){this._control=t,this._wv=e,this._transformFunction=o,this._undoModel=i,this._undoText=n,this._attachToControl(this._control),this._setValueBinded=this.setValue.bind(this)}function L(t,e,o,i,n,s){this._not=!!s,W.apply(this,arguments)}function E(t,e,o,i,n,s,r,a){this._propFrom=e[0],this._propTo=e[1],this._control=t,this._applyOnFly=i,this._undoModel=n,this._undoText=r,this._properties=e,this._inputsText=s,this._transformers=o;var l=this;t.slider({range:!0,min:o[0],max:o[1],values:[l._propFrom.value(),l._propTo.value()]}),this.$rangeHandleFrom=$(t.find(".ui-slider-handle")[0]).addClass("from"),this.$rangeHandleTo=$(t.find(".ui-slider-handle")[1]).addClass("to"),this.setValue(this._propFrom,0),this.setValue(this._propTo,1),a&&($(a).on("change",function(t){$(this).is(":checked")?(l._control.slider("enable"),$(l._inputsText[0]).prop("disabled",!1),$(l._inputsText[1]).prop("disabled",!1)):(l._control.slider("disable"),$(l._inputsText[0]).prop("disabled",!0),$(l._inputsText[1]).prop("disabled",!0))}),$(a).is(":checked")?(l._control.slider("enable"),$(l._inputsText[0]).prop("disabled",!1),$(l._inputsText[1]).prop("disabled",!1)):(l._control.slider("disable"),$(l._inputsText[0]).prop("disabled",!0),$(l._inputsText[1]).prop("disabled",!0))),s&&($(s[0]).val(this._control.slider("values",0)),$(s[1]).val(this._control.slider("values",1)),t.slider({slide:function(t,e){$(s[0]).val(e.values[0]),$(s[1]).val(e.values[1])}}),$(s).each(function(){$(this).on("keydown",function(t){parseInt($(s[0]).val())<l._transformers[0]?$(s[0]).val(l._transformers[0]):parseInt($(s[1]).val())>l._transformers[1]&&$(s[1]).val(l._transformers[1]),
-1!==$.inArray(t.keyCode,[46,8,9,27,13,110,190])||65===t.keyCode&&!0===t.ctrlKey||67===t.keyCode&&!0===t.ctrlKey||88===t.keyCode&&!0===t.ctrlKey||t.keyCode>=35&&t.keyCode<=39||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()})}),$(s[0]).on("keyup",function(t){parseInt($(this).val())<l._transformers[0]?$(this).val(l._transformers[0]):parseInt($(this).val())>l._transformers[1]&&$(this).val(l._transformers[1]),parseInt($(this).val())>parseInt($(s[1]).val())&&$(this).val(s[1].val()),l._control.slider("values",0,$(this).val()),E.prototype.setValueToProperty.call(l,l._control.slider("values"),"from")}),$(s[1]).on("keyup",function(t){parseInt($(this).val())<l._transformers[0]?$(this).val(l._transformers[0]):parseInt($(this).val())>l._transformers[1]&&$(this).val(l._transformers[1]),parseInt($(this).val())<$(s[0]).val()&&$(this).val(s[0].val()),l._control.slider("values",1,$(this).val()),E.prototype.setValueToProperty.call(l,l._control.slider("values"),"to")})),this._propFrom.listeners().subscribe(this,E.prototype.propertyChanged),this._propTo.listeners().subscribe(this,E.prototype.propertyChanged),i&&t.on("slide",function(t,e){l.setValueToProperty(l._control.slider("values"),e.handle)}),t.slider({stop:function(t,e){s&&($(s[0]).val(l._control.slider("values",0)),$(s[1]).val(l._control.slider("values",1))),l.setValueToProperty(l._control.slider("values"),e.handle)},start:function(t,e){s&&($(s[0]).val(l._control.slider("values",0)),$(s[1]).val(l._control.slider("values",1))),l.setValueToProperty(l._control.slider("values"),e.handle)}})}function M(t,e,o,i,n,s){j.call(this,t,e,o,i,n),this._separator=s||" ";var r=this;o&&t.change(function(){r.setValueToProperty(r.value())})}var V,B,I,A,O,F,z,D,H,R,N,j,G;o(1029),V=o(7).ensureNotNull,B=o(139).isNaN,I=o(29),A=I.rgba,O=I.rgbaToString,F=I.parseRgb,z=o(214).TimePointIndexSearchMode,D=o(114).NumericFormatter,H=o(215).LimitedPrecisionNumericFormatter,R=o(26),N=o(1016).addColorPicker,j=o(341).Binding,G=o(6).getLogger("Chart.PropertyPage"),n.prototype.model=function(){return this._model},n.prototype.bindControl=function(t){return this._bindings.push(t),t},n.prototype.unbindControl=function(t){var e=this._bindings.indexOf(t);-1!==e&&this._bindings.splice(e,1)},n.prototype.loadData=function(){var t,e,o;for(t=0;t<this._bindings.length;t++)e=this._bindings[t],e.properties?(o=e.properties(),e.setValue(o[0],0),e.setValue(o[1],1)):e.property&&(e.transparencyProperty&&e.transparencyProperty()?e.applyOldTransparency():e.setValue(e.property().value()))},n.prototype.saveData=function(){var t,e;for(this._model.beginUndoMacro(),t=0;t<this._bindings.length;t++)e=this._bindings[t],e.changed()&&this._model.setProperty(e.property(),e.value());this._model.endUndoMacro()},n.prototype.createLineWidthEditor=function(){var t=this._model._chartWidget.widget().prop("ownerDocument");return $('<div class="linewidth-slider">',t).slider({max:4,min:1,step:1})},n.prototype.createColorPicker=function(t){return N(null,t)},n.prototype.createTextEditor=function(t,e){var o={}
;return t&&(o.width=t),e&&(o.height=e),$(document.createElement("textarea")).css(o).addClass("tv-control-input")},n.prototype.createCombo=function(t){var e=$(document.createElement("select")),o=t.reduce(function(t,e){return t.add($(document.createElement("option")).prop({value:e,text:e}))},$());return e.append(o)},n.prototype.createKeyCombo=function(t){var e=$(document.createElement("select"));return $.each(t||[],function(t,o){$(document.createElement("option")).prop({value:t,text:o}).appendTo(e)}),e},n.prototype.createFontEditor=function(t){var e=t||TradingView.factoryDefaults("chartproperties.editorFontsList");return this.createCombo(e)},n.prototype.createFontSizeEditor=function(t){var e=t||[10,11,12,14,16,20,24,28,32,40];return this.createCombo(e).addClass("tv-select-container-fontsize")},n.prototype.createSeriesMinTickEditor=function(){var t,e,o,i,n="<select><option value='default'>"+$.t("Default")+"</option>",s=[{priceScale:1,minMove:1,frac:!1},{priceScale:10,minMove:1,frac:!1},{priceScale:100,minMove:1,frac:!1},{priceScale:1e3,minMove:1,frac:!1},{priceScale:1e4,minMove:1,frac:!1},{priceScale:1e5,minMove:1,frac:!1},{priceScale:1e6,minMove:1,frac:!1},{priceScale:1e7,minMove:1,frac:!1},{priceScale:1e8,minMove:1,frac:!1},{priceScale:2,minMove:1,frac:!0},{priceScale:4,minMove:1,frac:!0},{priceScale:8,minMove:1,frac:!0},{priceScale:16,minMove:1,frac:!0},{priceScale:32,minMove:1,frac:!0},{priceScale:64,minMove:1,frac:!0},{priceScale:128,minMove:1,frac:!0},{priceScale:320,minMove:1,frac:!0}];for(t in s)e=s[t],o=e.priceScale+","+e.minMove+","+e.frac,i=e.minMove+"/"+e.priceScale,n+="<option value='"+o+"'>"+i+"</option>";return n+="</select>",$(n)},n.prototype.createPrecisionEditor=function(){var t,e="<select><option value='default'>"+$.t("Default")+"</option>";for(t=0;t<=8;t++)e+="<option value='"+t+"'>"+t+"</option>";return e+="</select>",$(e)},n.prototype.createLabeledCell=function(t,e,o){var i,n,s,r,a=null;return"number"==typeof t.valueOf()?(a=t,i=e,n=o):(i=t,n=e),i+="",s=this._labelToId(i),r=$("<td>"),$("<label>").html(i.length>0?$.t(i):"").attr("for",s).appendTo(r),a&&r.attr("colspan",a),n&&n.attr("id",s),r},n.prototype.createTableInTable=function(t){var e=$("<tr>").appendTo(t),o=$("<td>").appendTo(e);return $('<table cellpadding="0" cellspacing="0">').appendTo(o)},n.prototype._labelToId=function(t){return"control"+t.replace(/(^| )\w/g,function(t){return"-"+t.trim().toLowerCase()})+Math.floor(1e3*Math.random())},n.prototype.addRow=function(t){return $(document.createElement("tr")).appendTo(t)},n.prototype.addLabeledRow=function(t,e,o,n){var s,r=e&&e.length>0?$.t(e):"",a=$(document.createElement("tr")),l=$(document.createElement("td")).html(r);return n&&(n=parseInt(n),B(n)&&(n=2),l.attr("colspan",n)),o&&(s=this._labelToId(e),o.attr("id",s),l.html(i(r,s))),a.append(l).appendTo(t)},n.prototype.addEditorRow=function(t,e,o,i){var n=$(document.createElement("td"));return o.row=this.addLabeledRow(t,e,o,i),o.appendTo(n.appendTo(o.row)),o},n.prototype.addColorPickerRow=function(t,e){
return this.addEditorRow(t,e,this.createColorPicker())},n.prototype.addOffsetEditorRow=function(t,e){var o=$("<input/>");return o.attr("type","text"),o.css("width","100px"),o.addClass("ticker"),this.addEditorRow(t,e,o)},n.prototype.addFontEditorRow=function(t,e){return this.addEditorRow(t,e,this.createFontEditor())},n.prototype.refreshStateControls=function(t,e,o){var i,n,s;for(i=0;i<e.length;i++){n=e[i],s=t[n.id];try{s.toggle(this.parseRule(n.visible,e,o))}catch(t){continue}s.attr("disabled",!this.parseRule(n.visible,e,o))}},n.prototype.parseRule=function(t,e,o){if(!t)return!0;var i=t.split("==");return!(i.length<2)&&o[i[0]].value()===i[1]},n.prototype.destroy=function(){for(var t=this._bindings.length;t--;)this._bindings[t].destroy();this._bindings.length=0},n.prototype.bindInteger=function(t,e,o,i,n){var s=[l(e.value())];void 0!==i&&s.push(r(1)),void 0!==n&&s.push(a(1e3)),this.bindControl(new f(t,e,s,!1,this.model(),o))},n.prototype.bindColor=function(t,e,o){this.bindControl(new S(t,e,!0,this.model(),o))},n.prototype.bindBoolean=function(t,e,o){this.bindControl(new w(t,e,!0,this.model(),o))},inherit(f,j),f.prototype.value=function(){var t,e=this._control.val();if(this._transformFunction)if(Array.isArray(this._transformFunction))for(t=0;t<this._transformFunction.length;t++)e=this._transformFunction[t](e);else e=this._transformFunction(e);return e},f.prototype.setValue=function(t){var e=this._control.val(),o=this._formatValue(t);e!==o&&this._control.val(o)},f.prototype.setValueToProperty=function(t){this._setter?this._setter.call(this,this.value()):this._undoModel.setProperty(this._property,t,this._undoText),this._changed=!1},inherit(g,f),inherit(_,j),_.prototype._forEachSubControl=function(t){this._subControlIds.forEach(function(e){var o="#"+e,i=this.control().find(o);t.call(this,i)},this)},_.prototype._parseSessions=function(t){var e,o,i=t.split("-",2);return 2!==i.length&&(i=["0","0"]),e=parseInt(i[0]),o=parseInt(i[1]),[Math.floor(e/100),e%100,Math.floor(o/100),o%100]},_.prototype.value=function(){var t,e,o,i=[];return this._forEachSubControl(function(t){i.push(t.val())}),t=function(t,e){return e.forEach(function(e){t=e(t)}),("0"+t).slice(-2)},e=[l(0),r(0),a(23)],o=[l(0),r(0),a(59)],t(i[0],e)+t(i[1],o)+"-"+t(i[2],e)+t(i[3],o)},_.prototype.setValue=function(t){var e=this._parseSessions(t);this._forEachSubControl(function(t){var o=t.val(),i=("0"+e[0]).slice(-2);e.shift(),o!==i&&t.val(i)})},inherit(m,j),m.prototype.value=function(){var t,e,o;return this._disabled?(this._control.attr("disabled",!0),null):(t=this._control.val(),e=this._toIntTransformer(t),e<0&&(e=0),o=this._mainSeries.bars().size(),o<=e&&(e=o-1),1e3*V(this._mainSeries.bars().valueAt(V(this._mainSeries.bars().lastIndex())-e))[TradingView.TIME_PLOT])},m.prototype.setValue=function(t){var e,o,i;return this._disabled||null==t?void this._control.attr("disabled",!0):t<0?(this._control.val(-t),
void this._property.setValue(this.value())):null===(e=this._mainSeries.data().plotValueToTimePointIndex(t/1e3,TradingView.TIME_PLOT,z.FromRight))?void(this._disabled=!0):(o=V(this._mainSeries.bars().lastIndex()),i=o-e,void(this._control.val()!==""+i&&this._control.val(i)))},inherit(y,j),y.prototype.value=function(){return this._control.val()},y.prototype.setValue=function(t){var e=this.value();this._transform&&(t=this._transform(t)),t&&e!==t&&this._control.val(t)},y.prototype._updateDisplayedSymbol=function(){this.setValue(this._property.value())},y.prototype.destroy=function(){j.prototype.destroy.call(this),this._updateDelegate&&this._updateDelegate.unsubscribe(this,this._updateDisplayedSymbol)},inherit(b,j),b.prototype.value=function(){var t=this._control.val();return this._transformFunction&&(t=this._transformFunction(t)),t},b.prototype.setValue=function(t){var e,o;if(this._control.val(t),this._control.selectbox)try{e=this._control.find("[value='"+t+"']"),e.length>0&&(o=e[0],this._control.selectbox("change",o.value,o.text))}catch(t){}},b.prototype.propertyChanged=function(t){var e=t.value();"function"==typeof this._propertyChangedHook&&(e=this._propertyChangedHook(e)),this.setValue(e)},inherit(C,j),C.prototype.value=function(){return this._property.value()},C.prototype.setValue=function(t){return this._control.html(t)},inherit(w,j),w.prototype.value=function(){return this.control().is(":checked")},w.prototype.setValue=function(t){var e,o,i,n;return this.control().is(".visibility-checker")&&(t?(this.control().closest("tr").find(".slider-range").slider("enable"),this.control().closest("tr").find('input[type="text"]').each(function(){$(this).prop("disabled",!1)})):(this.control().closest("tr").find(".slider-range").slider("disable"),this.control().closest("tr").find('input[type="text"]').each(function(){$(this).prop("disabled",!0)}))),this.control().is(".visibility-switch")&&(e={opacity:t?1:.5},o=t?"enable":"disable",i=this.control().data("hides"),i?i.closest("td").css(e):(n=this.control(),n.parent().parent().data("visible",t).find("td").filter(function(){var t=$(this);return!t.find("label").length&&t.find(":checkbox").attr("id")!==n.attr("id")}).each(function(){var i=$(this);i.children().each(function(){var n=$(this);n.is(".ui-slider")?n.slider(o):n.is("select")?(n.selectbox(o),i.css(e)):n.is(".custom-select")?(n.data(o)(),i.css(e)):n.is(".tvcolorpicker-container")?(n.find("input").prop("disabled",!t),i.css(e)):(n.prop("disabled",!t),i.css(e))})}))),this.control().attr("checked",!!t)},w.prototype.destroy=function(){j.prototype.destroy.call(this),this._control.off("change")},inherit(T,j),T.prototype.value=function(){return this.control().is(":disabled")},T.prototype.setValue=function(t){return t=!!t,this._inverted&&(t=!t),this.control().parents("label").toggleClass("disabled",t),this.control().attr("disabled",t)},inherit(x,j),x.prototype.value=function(){return this.control().hasClass("active")},x.prototype.setValue=function(t){return this.control().toggleClass("active",!!t)},inherit(S,j),
S.prototype.applyOldTransparency=function(){var t,e,o;this.transparencyProperty()&&(R.isHexColor(this.property().value())?(t=this.transparencyProperty().value?this.transparencyProperty().value():this.transparencyProperty(),e=F(this.property().value()),o=(100-t)/100,this.control().val(O(A(e,o)))):this.control().val(this.property().value()),this.control().change())},S.prototype.transparencyProperty=function(){return this._transparencyProperty},S.prototype.value=function(){return this._control.val()},S.prototype.setValue=function(t){this._control.val(t),this._control.change(),this._control.color&&this._control.color.fromString(t)},inherit(P,j),P.prototype.value=function(){return this._control.slider("option","value")},P.prototype.setValue=function(t){this._control.slider("option","value",t)},inherit(k,w),k.prototype.onIntervalChanged=function(){+this._intervalProperty.value()<1440?this._control.attr({disabled:!1,checked:!!this._property.value()}):this._control.attr({disabled:!0,checked:!1})},k.prototype.value=function(){return this._control.is(":disabled")?this._property.value():w.prototype.value.call(this)},k.prototype.setValue=function(t){if(!this._control.is(":disabled"))return w.prototype.setValue.call(this,t)},k.prototype.destroy=function(){this._intervalProperty.listeners().unsubscribe(this,this.onIntervalChanged),delete this._intervalProperty,w.prototype.destroy.call(this,arguments)},W.prototype._attachToControl=function(t){var e=this;this._wv.subscribe(this._setValueBinded,{callWithLast:!0}),$(this._control).on("change",function(){e.setValueToProperty(e.value())})},W.prototype.control=function(){return this._control},W.prototype.value=function(){var t=$(this._control).val();return this._transformFunction&&(t=this._transformFunction(t)),t},W.prototype.setValue=function(t){$(this._control).val(t)},W.prototype.setValueToProperty=function(t){this._undoModel.undoHistory.setWatchedValue(this._wv,t,this._undoText)},W.prototype.watchedValue=function(){return this._wv},W.prototype.destroy=function(){this._wv.unsubscribe(this._setValueBinded)},inherit(L,W),L.prototype._attachToControl=function(t){var e=this;this._wv.subscribe(this.setValue.bind(this),{callWithLast:!0}),$(this._control).on("click",function(){e.setValueToProperty(e.value())})},L.prototype.value=function(){var t=$(this._control).attr("checked");return this._not&&(t=!t),this._transformFunction&&(t=this._transformFunction(t)),t},L.prototype.setValue=function(t){this._not&&(t=!t),$(this._control).attr("checked",!!t)},E.prototype.properties=function(){return this._properties},E.prototype.value=function(t){return this._control.slider("values",t)},E.prototype.setValue=function(t,e){this._control.slider("values",e,t.value()),this._inputsText&&$(this._inputsText[e]).val(t.value())},E.prototype.propertyChanged=function(t){this.setValue(t)},E.prototype.setValueToProperty=function(t,e){($(e).hasClass("from")||"from"===e)&&(this._undoModel.beginUndoMacro(this._undoText[0]),this._undoModel.setProperty(this._propFrom,t[0],this._undoText[0]),
this._propFrom.setValue(t[0],0),this._undoModel.endUndoMacro()),($(e).hasClass("to")||"to"===e)&&(this._undoModel.beginUndoMacro(this._undoText[1]),this._undoModel.setProperty(this._propTo,t[1],this._undoText[1]),this._propTo.setValue(t[1],1),this._undoModel.endUndoMacro())},E.prototype.destroy=function(){this._propFrom&&this._propTo&&(this._propFrom.listeners().unsubscribe(this,j.prototype.propertyChanged),this._propTo.listeners().unsubscribe(this,j.prototype.propertyChanged))},inherit(M,j),M.prototype.value=function(){var t=[];return this._control.each(function(){var e=$(this);e.is(":checked")&&t.push(e.attr("value"))}),t.join(this._separator)},M.prototype.setValue=function(t){var e=t.split(this._separator).filter(Boolean);this._control.each(function(){var t=$(this),o=-1!==e.indexOf(t.attr("value"));t.attr("checked",o),t.parents("label").toggleClass("active",o)})},e.PropertyPage=n,e.UppercaseTransformer=s,e.GreateTransformer=r,e.LessTransformer=a,e.ToIntTransformer=l,e.ToFloatTransformer=c,e.ToFloatTransformerWithDynamicDefaultValue=p,e.ToFloatLimitedPrecisionTransformer=d,e.ToAsciiTransformer=u,e.ReplaceEmptyTransformer=h,e.SymbolInfoSymbolTransformer=v,e.SimpleStringBinder=f,e.FloatBinder=g,e.SessionBinder=_,e.BarTimeBinder=m,e.SymbolBinder=y,e.SimpleComboBinder=b,e.StaticContentBinder=C,e.BooleanBinder=w,e.DisabledBinder=T,e.ColorBinding=S,e.SliderBinder=P,e.CheckboxWVBinding=L,e.RangeBinder=E,e.generateLabelElementStr=i}).call(e,o(15))},1015:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path d="M5.182 6.596l-3.889-3.889-.707-.707 1.414-1.414.707.707 3.889 3.889 3.889-3.889.707-.707 1.414 1.414-.707.707-3.889 3.889 3.889 3.889.707.707-1.414 1.414-.707-.707-3.889-3.889-3.889 3.889-.707.707-1.414-1.414.707-.707 3.889-3.889z"/></svg>'},1016:function(t,e,o){"use strict";function i(t){var e=Object(l.parseRgb)(t),o=e.map(function(t){return t>50?t-50:0});return Object(l.rgbToString)(o)}function n(t){var e,o,i,n=[];for(e=0,o=t;e<o.length;e++)i=o[e],null!==Object(l.tryParseRgb)(i)&&n.push(i);return n}function s(t,e){void 0===e&&(e={});var o=$('<span class="tvcolorpicker-container">');return null!==t&&o.appendTo(t),void 0!==e.addClass&&o.addClass(e.addClass),$('<div class="tvcolorpicker-transparency">').appendTo(o),$('<input class="colorpicker-widget">').tvcolorpicker({customColors:n(Object(c.getJSON)("pickerCustomColors",[])),direction:e.direction,hideTransparency:!!e.hideTransparency}).on("change",function(){$(this).css("border-color",i($(this).val()||p))}).bind("customcolorchange",function(t,e){Object(c.setJSON)("pickerCustomColors",e)}).appendTo(o),o}var r,a,l,c,p;Object.defineProperty(e,"__esModule",{value:!0}),e.addColorPicker=s,r=o(14),o.n(r),a=o(339),o.n(a),l=o(29),o.n(l),c=o(44),o.n(c),p="#727272"},1027:function(t,e,o){"use strict";var i,n=o(211).ESC,s=function(t,e,i){var r,a,l,c,p,d,u=".popup-menu";t=$(t),i=i||{},i.activeClass=i.activeClass||"",r=(i.event||"click")+u,i.hideEvent&&(a=i.hideEvent+u),l=function(){},c=l,p={},d=function(r,d,h){
function v(e){var o=$(e.target).parents().andSelf();o.is(y)||o.is(t)||o.is(".charts-popup-tab-headers, .charts-popup-itemheader")||c()}function f(t){if(p.preventFirstProcessClick)return void(p.preventFirstProcessClick=!1);var e=$(t.target).parents().andSelf();e.is(".charts-popup-tab-headers, .charts-popup-itemheader")||i.notCloseOnButtons&&e.is(".icon-delete")||c()}function g(t){t.keyCode===n&&c()}function _(e,n,r){var a,l,c,p,d,u,h,v,f,g,m,b,C,w,T,x;if(e instanceof s.TabGroup){if(!e.tabs||!e.tabs.length)return;return 1!==e.tabs.length||e.tabs[0].title?(a=$('<div class="charts-popup-tab-group"></div>').appendTo(r),l=$('<div class="charts-popup-tab-headers"></div>').appendTo(a),c=null,void $.each(e.tabs||[],function(t,o){var i,n;o.items&&o.items.length&&(i=$('<div class="charts-popup-tab"></div>').hide().appendTo(a),$.each(o.items,function(){_(this,void 0,i)}),n=$('<span class="charts-popup-tab-header">').append($('<a href="javascript://" class="charts-popup-tab-header-label">').text(o.name)).appendTo(l),n.on("click",function(t){n.is(".active")||(l.find(".charts-popup-tab-header.active").removeClass("active"),n.addClass("active"),a.find(".charts-popup-tab").hide(),i.show(),t&&t.preventDefault(),"function"==typeof e.onChange&&e.onChange.call(e,o.name))}),c&&!o.active||(c=n,l.find(".charts-popup-tab-header.active").removeClass("active"),n.addClass("active"),a.find(".charts-popup-tab").hide(),i.show()))})):void $.each(e.tabs[0].items,function(){_(this,void 0,r)})}return e instanceof s.Group?(p=$('<div class="charts-popup-group"></div>').appendTo(r),e.title&&(d=$('<div class="charts-popup-itemheader"></div>').text(e.title).prepend($('<span class="charts-popup-itemheader-icon"></span>')),e.collapsible&&(p.addClass("charts-popup-group-collapsible"),p.toggleClass("collapsed",e.collapsed),d.on("click",function(){p.toggleClass("collapsed"),"function"==typeof e.onChange&&e.onChange(p.hasClass("collapsed")),y.height()===parseInt(y.css("max-height"))?y.addClass("popup-menu-scroll-y"):y.height()<parseInt(y.css("max-height"))&&y.removeClass("popup-menu-scroll-y")})),p.append(d)),void $.each(e.items,function(t){_(this,1,p)})):e instanceof s.Header?void r.append($('<div class="charts-popup-itemheader"></div>').text(e.title)):e.separator?(u=$('<span class="separator"></span>'),void r.append(u)):(u=$('<a class="item">'),e.url&&u.attr("href",e.url),e.target&&u.attr("target",e.target),n||u.addClass("first"),"function"==typeof e.active?e.active(e)&&u.addClass("active"):e.active&&u.addClass("active"),e.addClass&&u.addClass(e.addClass),e.addData&&u.data(e.addData),e.disabled&&u.addClass("disabled"),"function"==typeof e.action&&(h=e.action,v=function(t){$(t.target).parents().andSelf().is(w)||(h.apply(u,arguments),!e.url&&t&&"function"==typeof t.preventDefault&&t.preventDefault())},i.upAction?u.bind("mouseup",v):u.bind("click",v)),e.date?(f=$('<span class="title"></span>').appendTo(u),$('<span class="date"></span>').text(e.date||"").appendTo(u)):e.icon&&!i.svg?(g=$('<span class="icon"></span>').appendTo(u),
g.css("background-image",e.icon.image||""),e.icon.offset&&g.css("background-position","string"==typeof e.icon.offset?e.icon.offset:e.icon.offset.x+"px "+e.icon.offset.y+"px"),f=$('<span class="title"></span>').appendTo(u)):!0===i.svg&&e.svg?(i.wrapIcon?u.append($('<span class="icon-wrap">').addClass(e.iconClass).append(e.svg)):u.append(e.svg),f=$('<span class="title"></span>').appendTo(u)):e.iconClass?(u.append($('<span class="icon"></span>').addClass(e.iconClass)),f=$('<span class="title"></span>').appendTo(u)):f=$('<span class="title-expanded"></span>').appendTo(u),e.html?f.html(e.html):f.text(TradingView.clean(e.title,!0)||""),m=$('<span class="shortcut"></span>').appendTo(u),e.shortcut&&m.text(e.shortcut.keys),"function"==typeof e.deleteAction&&(b=e.deleteAction,C=e.deleteAction.title||$.t("Delete"),w=$('<span class="icon-delete">'),w.html(o(1015)),w.attr("title",C),w.on("click",function(t){b.apply(u,arguments),t.preventDefault()}),u.append(w)),e.buttons instanceof Array&&e.buttons.length&&e.buttons.forEach(function(t){t.el instanceof $||(t.el=$(t.el)),t.el.appendTo(u),t.handler&&t.el.on("click",function(e){t.handler.apply(u,arguments)})}),void 0!==e.counter&&("function"==typeof e.counter?(T=$('<span class="counter"></span>').html(e.counter()),T.appendTo(u)):(x=e.counterBlue?"blue":"",$('<span class="counter"></span>').text(e.counter+"").addClass(x).appendTo(u))),r.append(u),void t.data("popup-menu",r))}var m,y,b,C,w,T,x,S,P,k,W,L,E,M,V,B,I,A,O,F,z,D,H,R,N,j,G=r.target.ownerDocument,U=G.defaultView,Z=d||e;if("function"==typeof Z&&(Z=Z()),$(this).hasClass("open")||$(this).hasClass("active"))return r.preventDefault(),c(),void(m=p.scrollTop);switch(c=function(){p.scrollTop=y.scrollTop(),y.remove(),t.removeClass("active open "+i.activeClass),t.data("popup-menu",null),$(G).off("click",f),$(G).off("mousedown",v),Modernizr.touch&&$(G).off("touchstart.chartgui",v),$(G).off("selectstart."+u),G.removeEventListener("keydown",g,!1),c=l,i.onRemove&&i.onRemove()},t.addClass("active open "+i.activeClass),y=$('<div class="charts-popup-list">'),i.addClass&&y.addClass(i.addClass),i.zIndex&&y.css("z-index",i.zIndex),b=y,i.listInner&&(b=$('<div class="list-inner">').appendTo(b)),i.listTable&&(b=$('<div class="list-table">').appendTo(b)),$.each(Z,function(t){_(this,t,b)}),a||(p.preventFirstProcessClick=!0),$(G).on("click",f),$(G).on("mousedown",v),G.addEventListener("keydown",g,!1),Modernizr.touch&&$(G).on("touchstart.chartgui",v),i.upAction&&$(G).on("selectstart.popup-menu",function(){return!1}),y.appendTo(G.body),C=$(U).width(),w=Math.min($(U).height(),$("body").height()),T=t.outerWidth(),x=t.outerHeight(),S=t.offset(),m=$(U).scrollTop()||0,S.top-=m,S.top=Math.round(S.top),S.left=Math.round(S.left),P=y.outerWidth(),k=y.outerHeight(),W=void 0!==i.viewportSpacing?i.viewportSpacing:10,L=i.popupSpacing?~~i.popupSpacing:1,E=i.popupDrift?~~i.popupDrift:0,M=k-y.height(),V="down",i.direction&&(V="function"==typeof i.direction?i.direction():i.direction),B=!!i.reverse,"down"===V?(I=w-S.top-x-L-W-M,A=S.top-L-W-M,
I<Math.max(k||0,100)&&A>I&&(V="up")):"right"===V&&(O=C-S.left-T-L-W-M,F=S.left-L-W-M,O<Math.max(P||0,100)&&F>O&&(V="left")),V){case"down":case"up":"down"===V?y.css("top",S.top+x+L+"px"):y.css("bottom",w-S.top+L+"px").css("top","auto"),B?y.css("left",Math.max(S.left+E+T-P,W)+"px").css("right","auto"):y.css("left",S.left+E+"px").css("right","auto");break;case"right":case"left":L=Math.max(L,4),"right"===V?y.css("left",Math.floor(S.left+T+L)+"px").css("right","auto"):y.css("left",Math.floor(Math.max(S.left-P-L,W))+"px").css("right","auto"),B?y.css("top",Math.floor(Math.max(S.top+E+x-k,W))+"px"):y.css("top",Math.floor(S.top+E)+"px")}for(y.show(),z=S.top,"up"===V||{left:1,right:1}[V]&&B?"up"!==V?z+=x:z-=x+L+M+W:z=w-z-x-2*L-M,y.height()>z&&y.addClass("popup-menu-scroll-y"),y.css("max-height",z+"px"),i.careRightBorder&&(D=C+$(U).scrollLeft(),parseInt(y.css("left"))+y.width()+W>D&&y.css("left",D-y.width()-W+"px").css("right","auto")),i.careBottomBorder&&parseInt(y.css("top"))+y.height()+W>w+m&&y.css("top",w-y.height()-W+m+"px"),R=t.parents().andSelf(),N=R.size();N--;)if("fixed"===R.eq(N).css("position")){H=R.eq(N);break}H&&(j=y.offset(),y.css({position:"fixed",left:j.left-$(G).scrollLeft(),right:"auto"})),y[0].scrollHeight>y.height()&&y.addClass("popup-with-scroll"),r&&r.preventDefault()},r&&t.bind(r,d),a&&t.bind(a,function(){c()}),i.runOpened&&d()};s.TabGroup=function t(e){if(!(this instanceof t))return new t(e);e=e||{},this.tabs=[],"function"==typeof e.onChange&&(this.onChange=e.onChange)},s.TabGroup.prototype.appendTab=function(t,e,o){if(null==t?t="":t+="",e||(e=[]),o||(o={}),!Array.isArray(e))throw new TypeError("items must be an array");return this.tabs.push({name:t,items:e,active:!!o.active}),e},s.Header=function t(e){if(!(this instanceof t))return new t(e);this.title=e},s.Group=function t(e){if(!(this instanceof t))return new t(e);e=e||{},this.items=[],this.title=null==e.title?"":e.title+"",this.collapsible=!!e.collapsible,this.collapsed=!!e.collapsed,"function"==typeof e.onChange&&(this.onChange=e.onChange)},s.Group.prototype.push=function(){this.items.push.apply(this.items,arguments)},e.bindPopupMenu=s,i=function(t){t=$(t),t.unbind(".popup-menu"),t.removeData("popup-menu")},e.unbindPopupMenu=i},1028:function(t,e,o){var i,n,s;!function(r){n=[o(14),o(92)],i=r,void 0!==(s="function"==typeof i?i.apply(e,n):i)&&(t.exports=s)}(function(t){return t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})},1029:function(t,e,o){var i,n,s;!function(r){n=[o(14),o(335),o(1028),o(92),o(210)],i=r,void 0!==(s="function"==typeof i?i.apply(e,n):i)&&(t.exports=s)}(function(t){return t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},
numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,o,i=this.options,n=this.element.find(".ui-slider-handle"),s=[];for(o=i.values&&i.values.length||1,n.length>o&&(n.slice(o).remove(),n=n.slice(0,o)),e=n.length;e<o;e++)s.push("<span tabindex='0'></span>");this.handles=n.add(t(s.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var o,i,n,s,r,a,l,c=this,p=this.options;return!p.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),o={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(o),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var o=Math.abs(i-c.values(e));(n>o||n===o&&(e===c._lastChangedValue||c.values(e)===p.min))&&(n=o,s=t(this),r=e)}),!1!==this._start(e,r)&&(this._mouseSliding=!0,this._handleIndex=r,this._addClass(s,null,"ui-state-active"),s.trigger("focus"),a=s.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-a.left-s.width()/2,top:e.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,r,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},o=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,o),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,
this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,o,i,n,s;return"horizontal"===this.orientation?(e=this.elementSize.width,o=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,o=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=o/e,i>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),n=this._valueMax()-this._valueMin(),s=this._valueMin()+i*n,this._trimAlignValue(s)},_uiHash:function(t,e,o){var i={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(i.value=void 0!==e?e:this.values(t),i.values=o||this.values()),i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,o){var i,n=this.value(),s=this.values();this._hasMultipleValues()&&(i=this.values(e?0:1),n=this.values(e),2===this.options.values.length&&!0===this.options.range&&(o=0===e?Math.min(i,o):Math.max(i,o)),s[e]=o),o!==n&&!1!==this._trigger("slide",t,this._uiHash(e,o,s))&&(this._hasMultipleValues()?this.values(e,o):this.value(o))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,o){var i,n,s;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(o),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(i=this.options.values,n=arguments[0],s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(n[s]),this._change(null,s);this._refreshValue()},_setOption:function(e,o){var i,n=0;switch("range"===e&&!0===this.options.range&&("min"===o?(this.options.value=this._values(0),this.options.values=null):"max"===o&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,o),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(o),this.handles.css("horizontal"===o?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=n-1;i>=0;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),
this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,o,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(o=this.options.values.slice(),i=0;i<o.length;i+=1)o[i]=this._trimAlignValue(o[i]);return o}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,o=(t-this._valueMin())%e,i=t-o;return 2*Math.abs(o)>=e&&(i+=o>0?e:-e),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),o=this.options.step;t=Math.round((t-e)/o)*o+e,t>this.options.max&&(t-=o),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,o=e.indexOf(".");return-1===o?0:e.length-o-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,o,i,n,s,r=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,p={};this._hasMultipleValues()?this.handles.each(function(i){o=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,p["horizontal"===l.orientation?"left":"bottom"]=o+"%",t(this).stop(1,1)[c?"animate":"css"](p,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:o+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({width:o-e+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:o+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({height:o-e+"%"},{queue:!1,duration:a.animate}))),e=o}):(i=this.value(),n=this._valueMin(),s=this._valueMax(),o=s!==n?(i-n)/(s-n)*100:0,p["horizontal"===this.orientation?"left":"bottom"]=o+"%",this.handle.stop(1,1)[c?"animate":"css"](p,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:o+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-o+"%"},a.animate),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:o+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-o+"%"},a.animate))},_handleEvents:{keydown:function(e){var o,i,n,s=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,
this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,s)))return}switch(n=this.options.step,o=i=this._hasMultipleValues()?this.values(s):this.value(),e.keyCode){case t.ui.keyCode.HOME:i=this._valueMin();break;case t.ui.keyCode.END:i=this._valueMax();break;case t.ui.keyCode.PAGE_UP:i=this._trimAlignValue(o+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(o-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(o===this._valueMax())return;i=this._trimAlignValue(o+n);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(o===this._valueMin())return;i=this._trimAlignValue(o-n)}this._slide(e,s,i)},keyup:function(e){var o=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,o),this._change(e,o),this._removeClass(t(e.target),null,"ui-state-active"))}}})})},1033:function(t,e){},1035:function(t,e,o){"use strict";(function(e){function i(t,o,i){var n={saveAsText:$.t("Save As..."),applyDefaultText:$.t("Apply Defaults")};this._toolName=t,this._applyTemplate=o,this._options=$.extend(n,i||{}),this._list=[],e.enabled("charting_library_base")||(this.templatesDeferred=this.loadData())}var n=o(1027).bindPopupMenu,s=o(217),r=s.SaveRenameDialog,a=s.InputField,l=o(94).createConfirmDialog,c=o(6).getLogger("Chart.LineToolTemplatesList");i._cache={},i.prototype.getData=function(){return this._list},i.prototype.loadData=function(){var t=this;return this._toolName in i._cache?(this._list=i._cache[this._toolName],$.Deferred().resolve()):$.get("/drawing-templates/"+this._toolName+"/",function(e){t._list=e,i._cache[t._toolName]=e}).error(function(){c.logWarn("Failed to load drawing template: "+t._toolName)})},i.prototype.templatesLoaded=function(){return this.templatesDeferred},i.prototype.invalidateToolCache=function(){delete i._cache[this._toolName]},i.prototype.createButton=function(t){var e,o=this;return t=$.extend({},t,o._options),e=$("<a></span></a>").addClass(t.buttonClass?t.buttonClass:"_tv-button").html(t.buttonInner?t.buttonInner:$.t("Template")+'<span class="icon-dropdown">'),n(e,null,{event:"button-popup",hideEvent:"hide-popup",zIndex:t.popupZIndex,activeClass:t.popupActiveClass,direction:t.popupDirection}),e.bind("click",function(e){var i,n,s;e.stopPropagation(),$(this).is("active")||(i=[],"function"==typeof t.getDataForSaveAs&&(n=function(e){var i=JSON.stringify(t.getDataForSaveAs());o.saveTemplate(e,i)},i.push({title:t.saveAsText,action:o.showSaveDialog.bind(o,n),addClass:"special"})),"function"==typeof t.defaultsCallback&&i.push({title:t.applyDefaultText,action:t.defaultsCallback,addClass:"special"}),s=[],$.each(o._list,function(e,i){s.push({title:i,action:function(){o.loadTemplate.call(o,i,t.loadTemplateCallback)},deleteAction:function(){runOrSignIn(function(){var t=$.t("Do you really want to delete Drawing Template '{0}' ?").format(i);l({type:"modal",content:t}).then(function(t){t.on("action:yes",function(t){o.removeTemplate.call(o,i),t.close()}),t.open()})},{
source:"Delete line tool template"})}})}),s.length&&(s.sort(function(t,e){return t=t.title.toUpperCase(),e=e.title.toUpperCase(),t===e?0:t>e?1:-1}),i.push({separator:!0}),i=i.concat(s)),$(this).trigger("button-popup",[i]))}),e},i.prototype.loadTemplate=function(t,e){var o=this;return $.get("/drawing-template/"+this._toolName+"/?templateName="+encodeURIComponent(t),function(t){o._applyTemplate(JSON.parse(t.content)),e&&e()}).error(function(t){c.logWarn(t.responseText)})},i.prototype.removeTemplate=function(t){if(t){var e=this;$.post("/remove-drawing-template/",{name:t,tool:e._toolName}).error(function(t){c.logWarn(t.responseText)}),e.invalidateToolCache(),e._list=$.grep(e._list,function(e){return e!==t})}},i.prototype.saveTemplate=function(t,e){var o,i=this;t&&e&&(t=TradingView.clean(t),o=-1!==$.inArray(t,i._list),function(){var n={name:t,tool:i._toolName,content:e},s=function(){o||i._list.push(t)};$.post("/save-drawing-template/",n,s).error(function(t){c.logWarn(t.responseText)}),i.invalidateToolCache()}())},i.prototype.deleteAction=function(t){var e=t,o=this;runOrSignIn(function(){var t=$.t(" Do you really want to delete Drawing Template '{0}' ?").format(e);l({type:"modal",content:t}).then(function(t){t.on("action:yes",function(t){o.removeTemplate.call(o,e),t.close()}),t.open()})},{source:"Delete line tool template"})},i.prototype.showSaveDialog=function(t){var e=this,o="text",i=function(t){return TradingView.clean(t[o])},n=new r({fields:[new a({name:o,label:$.t("Template name")+":",maxLength:64,error:$.t("Please enter template name")})],title:$.t("Save Drawing Template As"),confirm:{shouldShowDialog:function(t){return-1!==e._list.indexOf(i(t))},getMessage:function(t){return $.t("Drawing Template '{0}' already exists. Do you really want to replace it?").format(i(t))}}});runOrSignIn(function(){n.show().then(function(e){t(e[o])})},{source:"Save line tool template",sourceMeta:"Chart"})},t.exports=i}).call(e,o(5))},1048:function(t,e,o){"use strict";var i,n,s,r,a;o.d(e,"a",function(){return a}),i=o(10),n=o.n(i),s=o(44),o.n(s),function(t){function e(e){return t.favorites.indexOf(e)}function o(){t.favorites=[],Object(s.getJSON)("chart.favoriteDrawings",[]).forEach(function(e){t.favorites.push(e.tool||e)}),t.favoritesSynced.fire()}function i(){Object(s.setJSON)("chart.favoriteDrawings",t.favorites)}t.favorites=[],t.favoritesSynced=new n.a,t.favoriteIndex=e,t.saveFavorites=i,o(),s.onSync.subscribe(null,o)}(r||(r={})),function(t){function e(){return r.favorites.slice()}function o(){return r.favorites.length}function i(t){return t<0||t>=o()?"":r.favorites[t]}function s(e){return!l(e)&&(r.favorites.push(e),r.saveFavorites(),t.favoriteAdded.fire(e),!0)}function a(e){var o=r.favoriteIndex(e);return-1!==o&&(r.favorites.splice(o,1),r.saveFavorites(),t.favoriteRemoved.fire(e),!0)}function l(t){return-1!==r.favoriteIndex(t)}function c(e,i){if(i<0||i>=o())return!1;var n=r.favoriteIndex(e);return-1!==n&&i!==n&&(r.favorites.splice(n,1),r.favorites.splice(i,0,e),r.saveFavorites(),t.favoriteMoved.fire(e,n,i),!0)}t.favoriteAdded=new n.a,
t.favoriteRemoved=new n.a,t.favoriteMoved=new n.a,t.favoritesSynced=r.favoritesSynced,t.favorites=e,t.favoritesCount=o,t.favorite=i,t.addFavorite=s,t.removeFavorite=a,t.isFavorite=l,t.moveFavorite=c}(a||(a={}))},1054:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 12"><path fill-rule="evenodd" d="M0 0h2v2H0V0zm4 0h2v2H4V0zM0 5h2v2H0V5zm4 0h2v2H4V5zm-4 5h2v2H0v-2zm4 0h2v2H4v-2z"/></svg>'},1062:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 16" width="12px" height="16px"><path fill-rule="evenodd" d="M10.5 5.333h-.75V3.81C9.75 1.707 8.07 0 6 0 3.93 0 2.25 1.707 2.25 3.81v1.523H1.5c-.825 0-1.5.686-1.5 1.524v7.62C0 15.313.675 16 1.5 16h9c.825 0 1.5-.686 1.5-1.524V6.857c0-.838-.675-1.524-1.5-1.524zM6 12c-.825 0-1.5-.675-1.5-1.5S5.175 9 6 9s1.5.675 1.5 1.5S6.825 12 6 12zm2.325-6.75h-4.65v-1.5A2.326 2.326 0 0 1 6 1.425 2.326 2.326 0 0 1 8.325 3.75v1.5z"/></svg>'},1078:function(t,e,o){"use strict";var i,n,s,r,a,l,c,p,d,u,h,v,f,g,_;o.d(e,"a",function(){return _}),i=o(14),n=o.n(i),s=o(56),o.n(s),r=o(233),o.n(r),a=o(91),l=o(44),o.n(l),c=o(10),p=o.n(c),d=o(17),u=o.n(d),h=o(329),v=o(1054),o.n(v),f=o(1116),o.n(f),g='<div class="tv-floating-toolbar i-closed i-hidden">'+(Modernizr.touch?'<div class="tv-floating-toolbar__drag-ext js-drag"></div>':"")+'<div class="tv-floating-toolbar__widget-wrapper"><div class="tv-floating-toolbar__drag js-drag">'+v+'</div><div class="tv-floating-toolbar__content js-content"></div></div></div>',_=function(){function t(e){this._widget=document.createElement("div"),this._isVertical=!1,this._hiddingTimeoutId=null,this._visibility=new u.a(!1),this._windowResizeListener=this._onWindowResize.bind(this),this._reorderedDelegate=new p.a,t._toolbars.push(this),this._options=e,this._widget=n()(g).get(0),this._content=this._widget.getElementsByClassName("js-content").item(0),this._setZIndex(t._startZIndex+t._toolbars.length-1),this._options.addClass&&(this._widget.className+=" "+this._options.addClass),this._options.layout&&"auto"!==this._options.layout&&(this._isVertical="vertical"===this._options.layout,this._updateLayoutType(),this._updateAxisOption())}return t.prototype.destroy=function(){this.hide(!0),t._toolbars.splice(t._toolbars.indexOf(this),1),document.body.contains(this._widget)&&document.body.removeChild(this._widget),this._widget.innerHTML=""},t.prototype.isVisible=function(){return this._visibility.value()},t.prototype.visibility=function(){return this._visibility.readonly()},t.prototype.isVertical=function(){return this._isVertical},t.prototype.show=function(){var t=this;this.isVisible()||(document.body.contains(this._widget)||(this._init(),document.body.appendChild(this._widget)),this._setHiddingTimeout(null),window.addEventListener("resize",this._windowResizeListener),this.raise(),this._visibility.setValue(!0),this._widget.classList.contains("i-hidden")?(this._widget.classList.remove("i-hidden"),setTimeout(function(){t.isVisible()&&t._widget.classList.remove("i-closed")})):this._widget.classList.remove("i-closed"),
this._onWindowResize())},t.prototype.hide=function(t){var e,o,i=this;void 0===t&&(t=!1),this.isVisible()&&(e=this._widget.classList.contains("i-closed"),this._widget.classList.add("i-closed"),this._visibility.setValue(!1),t||e?(this._setHiddingTimeout(null),this._widget.classList.add("i-hidden")):(o=setTimeout(function(){i._setHiddingTimeout(null),i._widget.classList.add("i-hidden")},this.hideDuration()),this._setHiddingTimeout(o)),window.removeEventListener("resize",this._windowResizeListener))},t.prototype.raise=function(){t._toolbars.length+t._startZIndex!==this._zIndex()&&(t._toolbars.splice(t._toolbars.indexOf(this),1),t._toolbars.push(this),t._updateAllZIndexes())},t.prototype.hideDuration=function(){return.75*a.dur},t.prototype.addWidget=function(t,e){var o,i,n;if(void 0===e&&(e={}),o=this.widgetsCount(),void 0===e.index&&(e.index=o),e.index<0||e.index>o)throw Error("Index must be in [0, "+o+"]");i=document.createElement("div"),i.className="tv-floating-toolbar__widget js-widget",i.appendChild(t),n=e.index===o?null:this._content.childNodes.item(e.index),this._content.insertBefore(i,n),this._onWindowResize()},t.prototype.removeWidget=function(t){var e=this._findWrapperForWidget(t);e&&(this._content.removeChild(e),this._onWindowResize())},t.prototype.widgetsCount=function(){return this._content.childNodes.length},t.prototype.showWidget=function(t){var e=this._findWrapperForWidget(t);e&&e.classList.remove("i-hidden")},t.prototype.hideWidget=function(t){var e=this._findWrapperForWidget(t);e&&e.classList.add("i-hidden")},t.prototype.removeWidgets=function(){for(;this._content.firstChild;)this._content.removeChild(this._content.firstChild);this._onWindowResize()},t.prototype.onWidgetsReordered=function(){return this._reorderedDelegate},t.prototype.onContextMenu=function(t){var e,o=this;Modernizr.touch?(e=new r(this._widget),e.get("press").set({time:500}),e.on("press",function(e){o._preventWidgetTouchEndEvent(),t(e.srcEvent)})):this._widget.addEventListener("contextmenu",t)},t.prototype._determineCurrentLayoutVertical=function(t){var e=this._isVertical?t.height:t.width;return window.innerWidth<e},t.prototype._getWidget=function(){return this._widget},t.prototype._findWrapperForWidget=function(t){var e,o,i=this._content.getElementsByClassName("js-widget");for(e=0;e<i.length;++e)if(o=i.item(e),o.contains(t))return o;return null},t.prototype._onVerticalChanged=function(t,e){},t.prototype._setHiddingTimeout=function(t){null!==this._hiddingTimeoutId&&clearTimeout(this._hiddingTimeoutId),this._hiddingTimeoutId=t},t.prototype._preventWidgetTouchEndEvent=function(){var t=this,e=function(o){o.preventDefault(),t._widget.removeEventListener("touchend",e)};this._widget.addEventListener("touchend",e)},t.prototype._updateLayoutType=function(){this._widget.classList.toggle("i-vertical",this._isVertical)},t.prototype._updateAxisOption=function(){if(this._options.dragOnlyInsideToolbar){var t=this._isVertical?"y":"x";Object(h.lazyJqueryUI)(n()(this._content)).sortable("option","axis",t)}},t.prototype._onWindowResize=function(){var t,e
;"auto"===(this._options.layout||"auto")&&(t=this._isVertical,e=this._getCorrectedWidgetRect(),this._isVertical=this._determineCurrentLayoutVertical(e),this._updateLayoutType(),t!==this._isVertical&&(this._onVerticalChanged(this._isVertical,t),this._updateAxisOption())),this._checkPosition()},t.prototype._checkPosition=function(){var t=this._getCorrectedWidgetRect(),e={left:t.left,top:t.top};this._correctPosition(e),t.left===e.left&&t.top===e.top||(this._widget.style.left=e.left+"px",this._widget.style.top=e.top+"px")},t.prototype._correctPosition=function(t){var e=this._getCorrectedWidgetRect();t.left+e.width>window.innerWidth&&(t.left=Math.max(0,window.innerWidth-e.width)),t.top+e.height>window.innerHeight&&(t.top=Math.max(0,window.innerHeight-e.height)),t.left=Math.max(0,t.left),t.top=Math.max(0,t.top)},t.prototype._setZIndex=function(t){this._widget.style.zIndex=t+""},t.prototype._zIndex=function(){return+this._widget.style.zIndex},t.prototype._loadPosition=function(){var t=Object(l.getJSON)(this._options.positionSettingsKey,this._options.defaultPosition);this._widget.style.left=Math.round(t.left)+"px",this._widget.style.top=Math.round(t.top)+"px",this._onWindowResize()},t.prototype._savePosition=function(){var t=this._widget.getBoundingClientRect();Object(l.setJSON)(this._options.positionSettingsKey,{left:t.left,top:t.top})},t.prototype._init=function(){this._loadPosition(),Object(h.lazyJqueryUI)(n()(this._widget)).draggable({containment:"window",drag:this._onDragEvent.bind(this),handle:".js-drag",stop:this._savePosition.bind(this)}),this._options.allowSortable&&this._initSortable(),this._widget.addEventListener(Modernizr.touch?"touchstart":"mousedown",this.raise.bind(this))},t.prototype._onDragEvent=function(t,e){this._correctPosition(e.position)},t.prototype._initSortable=function(){var t=this,e=-1;Object(h.lazyJqueryUI)(n()(this._content)).sortable({start:function(t,o){e=o.item.index()},stop:function(o,i){var n=i.item.index();e!==n&&t._reorderedDelegate.fire(e,n)},tolerance:"pointer",distance:5,containment:!!this._options.dragOnlyInsideToolbar&&"parent",scroll:!1,placeholder:"sortable-placeholder",forcePlaceholderSize:!0}),this._updateAxisOption()},t.prototype._getCorrectedWidgetRect=function(){var t,e,o,i,n=this._widget.getBoundingClientRect();return this._widget.classList.contains("i-closed")?(t=.925,e=1/t-1,o=n.width*e,i=n.height*e,{bottom:n.bottom+i/2,height:n.height+i,left:n.left-o/2,right:n.right+o/2,top:n.top-i/2,width:n.width+o}):n},t._updateAllZIndexes=function(){t._toolbars.forEach(function(e,o){e._setZIndex(t._startZIndex+o)})},t._startZIndex=20,t._toolbars=[],t}()},1116:function(t,e){},1117:function(t,e){},1174:function(t,e,o){"use strict";var i,n,s,r,a,l,c,p;Object.defineProperty(e,"__esModule",{value:!0}),o.d(e,"GroupButtonFloatingToolbar",function(){return p}),i=o(0),n=o(7),o.n(n),s=o(1078),r=o(10),a=o.n(r),l=o(1033),o.n(l),c=o(1175),o.n(c),p=function(t){function e(o){var i=t.call(this,e._prepareOptions(o))||this;return i._onWidgetStateChangedDelegate=new a.a,i._statedWidgets=[],
i._currentPopup=null,i._onWindowClickedListener=i._onWindowClicked.bind(i),i}return i.c(e,t),e.prototype.show=function(){t.prototype.show.call(this),document.addEventListener("mousedown",this._onWindowClickedListener)},e.prototype.hide=function(){t.prototype.hide.call(this),document.removeEventListener("mousedown",this._onWindowClickedListener)},e.prototype.destroy=function(){this._closePopup(),t.prototype.destroy.call(this)},e.prototype.addGroupedWidget=function(t,o){var i,s,r;void 0===o&&(o={}),Object(n.assert)(t.states.length>0&&-1!==e._getStateIndexById(t,t.currentStateId),"Argument is invalid (count: "+t.states.length+", state: "+t.currentStateId+")"),i=document.createElement("div"),i.className="tv-grouped-floating-toolbar__widget-wrapper apply-common-tooltip",t.widgetAddClass&&i.classList.add(t.widgetAddClass),i.setAttribute("title",t.tooltip),s={isEnabled:!0,statedWidget:t,toolbarWidget:i},r=this._onWidgetClicked.bind(this,s),s.clickListener=r,i.addEventListener("click",r),this._updateWidgetPreview(s),this.addWidget(i,o),this._statedWidgets.push(s)},e.prototype.removeGroupedWidget=function(t){var e,o,i=this._statedWidgets.length;for(e=0;e<i;++e)if(o=this._statedWidgets[e],o.statedWidget.id===t)return this._isPopupCreatedForWidget(t)&&this._closePopup(),void 0!==o.clickListener&&o.toolbarWidget.removeEventListener("click",o.clickListener),this.removeWidget(o.toolbarWidget),this._statedWidgets.splice(e,1),void this._updatePopupPosition();Object(n.assert)(!1,"Unknown groupId("+t+")")},e.prototype.updateGroupedWidget=function(t,e){this._closePopup();var o=this._ensuredGetWidgetDataForId(t);o.statedWidget.currentStateId=e.currentStateId,o.statedWidget.states=e.states,this._updateWidgetPreview(o)},e.prototype.setGroupedWidgetEnabled=function(t,e){var o=this._ensuredGetWidgetDataForId(t);o.isEnabled=e,o.toolbarWidget.classList.toggle("i-disabled",!e)},e.prototype.setGroupedWidgetState=function(t,o){var i=this._ensuredGetWidgetDataForId(t);Object(n.assert)(-1!==e._getStateIndexById(i.statedWidget,o),"Unknown stateId ("+o+")"),i.statedWidget.currentStateId=o,this._updateSubWidgetsState(i.statedWidget),this._updateWidgetPreview(i)},e.prototype.onWidgetStateChanged=function(){return this._onWidgetStateChangedDelegate},e.prototype._onVerticalChanged=function(t,e){this._updatePopupPosition()},e.prototype._ensuredGetWidgetDataForId=function(t){var e,o,i;for(e=0,o=this._statedWidgets;e<o.length;e++)if(i=o[e],i.statedWidget.id===t)return i;throw Error("Unknown groupId("+t+")")},e.prototype._onWidgetClicked=function(t,e){var o=this._currentPopup&&this._isPopupCreatedForWidget(t.statedWidget.id);this._closePopup(),!o&&t.isEnabled&&this._createPopup(t)},e.prototype._createPopup=function(t){var e,o=this,i={createdFor:t.toolbarWidget,element:document.createElement("div"),stateWidgetId:t.statedWidget.id,widgets:[]};i.element.className+="tv-grouped-floating-toolbar__popup js-popup",e=t.statedWidget.states.length,t.statedWidget.states.forEach(function(n,s){var r=o._createSubWidget(t,n),a=o._onSubWidgetClicked.bind(o,t,n.id)
;r.addEventListener("click",a),i.widgets.push({clickListener:a,stateWidget:n,widget:r}),r.classList.add("tv-grouped-floating-toolbar__sub-widget--slide-right-"+s),r.classList.add("tv-grouped-floating-toolbar__sub-widget--slide-left-"+(e-s+1)),i.element.appendChild(r)}),this._currentPopup=i,this._updateSubWidgetsState(t.statedWidget),t.toolbarWidget.classList.add("i-dropped"),this._getWidget().appendChild(this._currentPopup.element),Promise.resolve().then(function(){o._currentPopup&&o._currentPopup.element.classList.add("i-opened")}),this._updatePopupPosition()},e.prototype._closePopup=function(){var t,e,o=this;this._statedWidgets.forEach(function(t){t.toolbarWidget.classList.remove("i-dropped")}),this._currentPopup&&(t=this._currentPopup.widgets,e=this._currentPopup.element,this._currentPopup=null,t.forEach(function(t){t.widget.removeEventListener("click",t.clickListener)}),e.classList.remove("i-opened"),e.addEventListener("transitionend",function(t){t.target===e&&o._getWidget().removeChild(e)}))},e.prototype._updateWidgetPreview=function(t){var o,i=e._getStateIndexById(t.statedWidget,t.statedWidget.currentStateId);Object(n.assert)(-1!==i,"Unknown state id: "+t.statedWidget.currentStateId),o=t.statedWidget.states[i].widget.cloneNode(!0),t.toolbarWidget.firstChild?t.toolbarWidget.replaceChild(o,t.toolbarWidget.firstChild):(t.toolbarWidget.appendChild(o),t.toolbarWidget.appendChild(e._createCaret()))},e.prototype._updateSubWidgetsState=function(t){this._currentPopup&&this._isPopupCreatedForWidget(t.id)&&this._currentPopup.widgets.forEach(function(o){o.widget.classList.toggle(e._activeSubWidgetClass,o.stateWidget.id===t.currentStateId)})},e.prototype._updatePopupPosition=function(){var t,e,o,i,n,s,r,a;if(this._currentPopup){if(t=this._currentPopup.createdFor,e=this._getWidget().getBoundingClientRect(),!(o=this._findWrapperForWidget(t))||!this._currentPopup)throw Error("Toolbar has no wrapper for preview's widget or there is no popup");i=o.getBoundingClientRect(),n=this._currentPopup.element.getBoundingClientRect(),s=this._currentPopup.element,this.isVertical()?(s.classList.remove("tv-grouped-floating-toolbar__popup--at-top"),s.style.top=i.top-e.top+1+"px",s.style.left="",e.left>window.innerWidth-e.right?s.classList.add("tv-grouped-floating-toolbar__popup--at-left"):s.classList.remove("tv-grouped-floating-toolbar__popup--at-left")):(s.classList.remove("tv-grouped-floating-toolbar__popup--at-left"),r=i.left+n.width,a=0,r>window.innerWidth?e.left+n.width>window.innerWidth&&(a=e.width-n.width):a=i.left-e.left+1,s.style.left=a+"px",e.bottom+n.height>window.innerHeight?s.classList.add("tv-grouped-floating-toolbar__popup--at-top"):(s.classList.remove("tv-grouped-floating-toolbar__popup--at-top"),s.style.top=""))}},e.prototype._isPopupCreatedForWidget=function(t){return!(!this._currentPopup||this._currentPopup.stateWidgetId!==t)},e.prototype._createSubWidget=function(t,e){var o=document.createElement("div");return o.className+="tv-grouped-floating-toolbar__sub-widget",
t.statedWidget.stateWidgetAddClass&&o.classList.add(t.statedWidget.stateWidgetAddClass),o.appendChild(e.widget),o},e.prototype._onSubWidgetClicked=function(t,e){this._closePopup(),t.statedWidget.currentStateId!==e&&(this.setGroupedWidgetState(t.statedWidget.id,e),this._onWidgetStateChangedDelegate.fire(t.statedWidget.id,e))},e.prototype._onWindowClicked=function(t){if(this.isVisible()&&this._currentPopup&&!e._isEventInElement(t,this._currentPopup.element)){for(var o=0;o<this._statedWidgets.length;++o)if(e._isEventInElement(t,this._statedWidgets[o].toolbarWidget))return;this._closePopup()}},e._getStateIndexById=function(t,e){for(var o=0;o<t.states.length;++o)if(t.states[o].id===e)return o;return-1},e._createCaret=function(){var t=document.createElement("div");return t.className="tv-caret tv-caret--small tv-caret--colored tv-grouped-floating-toolbar__caret",t},e._prepareOptions=function(t){var e=" tv-grouped-floating-toolbar";return t.addClass?t.addClass+=e:t.addClass=e,t},e._isEventInElement=function(t,e){return t.target===e||e.contains(t.target)},e._activeSubWidgetClass="tv-grouped-floating-toolbar__sub-widget--current",e}(s.a)},1175:function(t,e){},1176:function(t,e){},1177:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M2 0a2 2 0 0 0-2 2v14h14a2 2 0 0 0 2-2H2zm2 0v2h3V0zm5 0v2h3V0zm5 0v2h2a2 2 0 0 0-2-2zm0 4v3h2V4zm0 5v3h2V9z"/></svg>'},1178:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 16"><path d="M15.09 6.857s-.571 0-.724-.533c-.114-.457-.305-.876-.533-1.295-.229-.495.152-.876.152-.876l.571-.571c.229-.229.229-.61 0-.876l-.762-.762c-.229-.229-.61-.229-.876 0l-.571.571s-.381.381-.876.152c-.419-.229-.838-.419-1.295-.533-.533-.152-.533-.724-.533-.724v-.8a.602.602 0 0 0-.61-.61H7.966a.602.602 0 0 0-.61.61v.8s0 .571-.533.724c-.457.114-.876.305-1.295.533-.495.229-.876-.152-.876-.152l-.571-.571c-.229-.229-.61-.229-.876 0l-.762.762c-.229.229-.229.61 0 .876l.571.571s.381.381.152.876c-.229.419-.419.838-.533 1.295-.152.495-.724.533-.724.533h-.8a.602.602 0 0 0-.61.61v1.067c0 .343.267.61.61.61h.8s.571 0 .724.533c.114.457.305.876.533 1.295.229.495-.152.876-.152.876l-.571.571c-.229.229-.229.61 0 .876l.762.762c.229.229.61.229.876 0l.571-.571s.381-.381.876-.152c.419.229.838.419 1.295.533.495.152.533.724.533.724v.8c0 .343.267.61.61.61h1.067c.343 0 .61-.267.61-.61v-.8s0-.571.533-.724c.457-.114.876-.305 1.295-.533.495-.229.876.152.876.152l.571.571c.229.229.61.229.876 0l.762-.762c.229-.229.229-.61 0-.876l-.571-.571s-.381-.381-.152-.876c.229-.419.419-.838.533-1.295.152-.495.724-.533.724-.533h.8c.343 0 .61-.267.61-.61V7.467a.602.602 0 0 0-.61-.61h-.8zM8.5 11.555a3.541 3.541 0 0 1-3.556-3.556A3.541 3.541 0 0 1 8.5 4.443a3.541 3.541 0 0 1 3.556 3.556A3.561 3.561 0 0 1 8.5 11.555z"/></svg>'},1179:function(t,e){
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.5 2H0v12c0 .825.675 1.5 1.5 1.5h12V14h-12V2zm13.056-2H4.445c-.794 0-1.444.65-1.444 1.444v10.111c0 .794.65 1.444 1.444 1.444h10.111c.794 0 1.444-.65 1.444-1.444V1.444C16 .65 15.35 0 14.556 0z"/></svg>'},1180:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 15"><path d="M1 0C.45 0 0 .45 0 1v11h1V1h9V0H1zm2.467 2C2.66 2 2 2.65 2 3.444v10.111c0 .794.66 1.444 1.467 1.444h8.067c.807 0 1.467-.65 1.467-1.444V3.444c0-.794-.66-1.444-1.467-1.444H3.467zM3 3h9v11H3V3z"/></svg>'},1181:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 12"><path d="M8.25 0C4.5 0 1.297 2.332 0 5.625c1.297 3.292 4.5 5.625 8.25 5.625s6.953-2.333 8.25-5.625C15.203 2.332 12 0 8.25 0zm0 9.375c-2.07 0-3.75-1.68-3.75-3.75 0-2.07 1.68-3.75 3.75-3.75 2.07 0 3.75 1.68 3.75 3.75 0 2.07-1.68 3.75-3.75 3.75zm0-6C7.005 3.375 6 4.38 6 5.625s1.005 2.25 2.25 2.25 2.25-1.005 2.25-2.25-1.005-2.25-2.25-2.25z"/></svg>'},1182:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 13"><path d="M1 11.571C1 12.357 1.6 13 2.333 13h5.333c.733 0 1.333-.643 1.333-1.429V3h-8v8.571zM8.5 1L6.786 0H3.215L1.501 1h-1.5v1h10V1h-1.5z"/></svg>'},1183:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 6" width="22" height="6"><path d="M1.5 2a.5.5 0 0 0 0 1h19a.5.5 0 0 0 0-1h-19z"/></svg>'},1184:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 6" width="22" height="6"><path d="M2 2a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2H2z"/></svg>'},1185:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 6" width="22" height="6"><path d="M2 1a1.5 1.5 0 0 0 0 3h18a1.5 1.5 0 0 0 0-3H2z"/></svg>'},1186:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 6" width="22" height="6"><path d="M2 1a2 2 0 0 0 0 4h18a2 2 0 0 0 0-4H2z"/></svg>'},1187:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 6" width="22" height="6"><path d="M1.5 2a.5.5 0 0 0 0 1H3V2H1.5zM4 2v1h2V2H4zm3 0v1h2V2H7zm3 0v1h2V2h-2zm3 0v1h2V2h-2zm3 0v1h2V2h-2zm3 0v1h1.5a.5.5 0 0 0 0-1H19z"/></svg>'},1188:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 6" width="22" height="6"><path d="M1.5 2a.5.5 0 0 0 0 1H5V2zM7 2v1h3V2zm5 0v1h3V2zm5 0v1h3.5a.5.5 0 0 0 0-1z"/></svg>'},1189:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 6" width="22" height="6"><path d="M20 2.5a.5.5 0 1 1 1 0 .5.5 0 1 1-1 0zm-19 0a2 2 0 1 1 4 0 2 2 0 1 1-4 0z"/><path d="M20.5 3H3V2h17.5z"/></svg>'},1190:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 6" width="22" height="6"><path d="M0 2.5L8 0v5zm20 0a.5.5 0 1 1 1 0 .5.5 0 1 1-1 0z"/><path d="M20.5 3H7V2h13.5z"/></svg>'},1191:function(t,e){
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 6" width="22" height="6"><path d="M0 2.5a.5.5 0 1 1 1 0 .5.5 0 1 1-1 0zm18 0a2 2 0 1 1 4 0 2 2 0 1 1-4 0zm-9 0a2 2 0 1 1 4 0 2 2 0 1 1-4 0z"/><path d="M19 3H.5V2H19z"/></svg>'},1192:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 6" width="22" height="6"><path d="M2 2.5a.5.5 0 1 1-1 0 .5.5 0 1 1 1 0zM21 2.5a2 2 0 1 1-4 0 2 2 0 1 1 4 0z"/><path d="M1.5 2H19v1H1.5z"/></svg>'},1193:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 6" width="22" height="6"><path d="M22 2.5L14 5V0zM2 2.5a.5.5 0 1 1-1 0 .5.5 0 1 1 1 0z"/><path d="M1.5 2H15v1H1.5z"/></svg>'},1194:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 6" width="22" height="6"><path d="M22 2.5a.5.5 0 1 1-1 0 .5.5 0 1 1 1 0zM4 2.5a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM13 2.5a2 2 0 1 1-4 0 2 2 0 1 1 4 0z"/><path d="M3 2h18.5v1H3z"/></svg>'},1195:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38"><path d="M0 0v38h38V0H0zm7 29h24v4H7v-4z" class="bg"/><path d="M24.748 16l-3.75-3.748-9.998 10V26h3.75l9.998-10zm2.96-2.96a.996.996 0 0 0 0-1.408l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.96 1.96 3.75 3.75 1.96-1.96z" class="icon"/></svg>'},1196:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38"><path d="M0 0v38h38V0H0zm7 29h24v4H7v-4z" class="bg"/><path d="M24.06 17.94L15.123 9l-1.41 1.41 2.38 2.38-5.15 5.15a1.49 1.49 0 0 0 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM12.713 19l4.79-4.79L22.29 19h-9.58zM26.5 20.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5z" class="icon"/></svg>'},1197:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38"><path d="M0 0v38h38V0H0zm7 29h24v4H7v-4z" class="bg"/><path d="M23.094 25.5L22 22.17h-5.904l-1.17 3.33H12.5l6.446-16h.574l5.98 16h-2.405zM19.13 13.637l-2.46 6.95h4.712l-2.252-6.95z" class="icon"/></svg>'}});